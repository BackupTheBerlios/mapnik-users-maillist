<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] [Mapnik-devel] Better Print Support GSoC's	project
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2010-March/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20%5BMapnik-devel%5D%20Better%20Print%20Support%20GSoC%27s%0A%09project&In-Reply-To=%3CAB9DEB5F-1477-49D6-B622-0359BA09C656%40hailmail.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003119.html">
   <LINK REL="Next"  HREF="003124.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] [Mapnik-devel] Better Print Support GSoC's	project</H1>
    <B>Dane Springmeyer</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20%5BMapnik-devel%5D%20Better%20Print%20Support%20GSoC%27s%0A%09project&In-Reply-To=%3CAB9DEB5F-1477-49D6-B622-0359BA09C656%40hailmail.net%3E"
       TITLE="[Mapnik-users] [Mapnik-devel] Better Print Support GSoC's	project">blake at hailmail.net
       </A><BR>
    <I>Mon Mar 29 03:57:35 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003119.html">[Mapnik-users] [Mapnik-devel] Better Print Support GSoC's	project
</A></li>
        <LI>Next message: <A HREF="003124.html">[Mapnik-users] [Mapnik-devel] Better Print Support GSoC's	project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3123">[ date ]</a>
              <a href="thread.html#3123">[ thread ]</a>
              <a href="subject.html#3123">[ subject ]</a>
              <a href="author.html#3123">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Carlos,

First of all - really great approach. Summarizing your understanding  
as a way to frame further questions is really helpful, so thanks for  
this effort.

I assume that Robert and others will also respond, but I'll provide my  
thoughts inline...

On Mar 27, 2010, at 3:16 AM, Carlos Enrique L&#243;pez Garc&#233;s wrote:

&gt;<i> Good evening, and thanks again for your replies. I wanted to do some  
</I>&gt;<i> research before replying again, so I include here my interpretation  
</I>&gt;<i> of each of your ideas. I'll start with the ideas that Robert Coup  
</I>&gt;<i> kindly shared. I'd appreciate if you could tell me if I  
</I>&gt;<i> misunderstood something:
</I>&gt;<i>
</I>&gt;<i> As I understand, based on the discussion thread 'Mapnik viewer and  
</I>&gt;<i> OSM rendering' (<A HREF="http://www.mail-archive.com/mapnik-devel@lists.berlios.de/msg00096.html">http://www.mail-archive.com/mapnik-devel@lists.berlios.de/msg00096.html</A> 
</I>&gt;<i> ), there is an experimental branch developed by Ben Moores in which  
</I>&gt;<i> wxpdfdoc (<A HREF="http://wxcode.sourceforge.net/components/wxpdfdoc/,">http://wxcode.sourceforge.net/components/wxpdfdoc/,</A> a c++  
</I>&gt;<i> library for creating PDF documents) is used to render maps on PDF  
</I>&gt;<i> documents and many of the features mentioned below are already  
</I>&gt;<i> included.
</I>
Yes!

I personally was not very familiar with this branch, and would be  
curious from Robert to have some pointers to the virtues of wxpdfdoc.

&gt;<i>
</I>&gt;<i> Ideas from Robert Coup:
</I>&gt;<i> -----------------------------------
</I>&gt;<i>
</I>&gt;<i> Port features from wxpdf (/branches/experimental-pdf/) to a Cairo- 
</I>&gt;<i> based PDF renderer, including:
</I>&gt;<i>
</I>&gt;<i> - Adding a border to the map to show coordinates: I interpret this  
</I>&gt;<i> as displaying a frame around the map that shows the longitude and  
</I>&gt;<i> latitude coordinates. The more the map is zoomed in, the more exact  
</I>&gt;<i> the coordinates will be.
</I>
good description.

&gt;<i>
</I>&gt;<i> - Grids: I interpret this as displaying the longitude and latitude  
</I>&gt;<i> lines over the map.
</I>&gt;<i>
</I>
yes

&gt;<i> - Scale bars: Display the chart that shows the scale of the map  
</I>&gt;<i> graphically (<A HREF="http://en.wikipedia.org/wiki/Linear_scale">http://en.wikipedia.org/wiki/Linear_scale</A>).
</I>&gt;<i>
</I>
Yes, this can take a few different forms but in general the idea is to  
graphically display the relationship between real world distance and  
map distance.

Very recently a Mapnik user added scales using pycairo, which could  
act as a guide for porting/exposing these features in C++/Mapnik Core.

<A HREF="http://oliverobrien.co.uk/2010/03/map-adornments-with-cairo/">http://oliverobrien.co.uk/2010/03/map-adornments-with-cairo/</A>

&gt;<i> - Overlay images, including other PDFs: Does the 'overlay' concept  
</I>&gt;<i> have the same meaning as in Google Maps? According to Google Maps'  
</I>&gt;<i> documentation, an overlay is an object attached to a coordinate,  
</I>&gt;<i> like the markers used to point to places (<A HREF="http://code.google.com/apis/maps/documentation/mapplets/overlays.html#Markers">http://code.google.com/apis/maps/documentation/mapplets/overlays.html#Markers</A> 
</I>&gt;<i> ). If this is true, then this feature is about displaying these  
</I>&gt;<i> overlay images on the exact points indicated by the associated  
</I>&gt;<i> coordinates (considering that the units used for displaying on the  
</I>&gt;<i> screen and printing on a document are different, am I right?). I'm  
</I>&gt;<i> not sure if I understand the part 'including other PDFs', though.
</I>
Yes, I think you are on the right track. Robert will likely clarify,  
but I imagine the idea is that you could combine map information from  
Mapnik with existing PDF documents that do not have an explicit  
geographical reference. These PDF's could likely contain anything,  
points, lines, polygons, or text and would be positioned on the page  
in screen coordinates rather than geographical coordinates, but this  
is just a guess.

&gt;<i>
</I>&gt;<i> - Paper sizes/scale calculations: I read that images are displayed  
</I>&gt;<i> on paper based on DPI units, so some calculations are needed to  
</I>&gt;<i> scale the maps to fit different paper sizes. Tom Hughes mentions in  
</I>&gt;<i> the same thread that there are some issues that need to be  
</I>&gt;<i> considered when tranlating the units used by Mapnik and those of  
</I>&gt;<i> Cairo.
</I>
Yes, these are core issues that should be worked out, tested,  
investigated pretty early. I see you are playing around with <A HREF="http://trac.mapnik.org/ticket/343">http://trac.mapnik.org/ticket/343</A> 
, which is great.

&gt;<i>
</I>&gt;<i> - Map layers as PDF layers: According to what I read, the objects  
</I>&gt;<i> displayed on a PDF page can be organized in layers, which can be  
</I>&gt;<i> hidden. As a map is rendered in layers, whose order is defined by a  
</I>&gt;<i> Mapnik configuration file (<A HREF="http://trac.mapnik.org/wiki/XMLConfigReference">http://trac.mapnik.org/wiki/XMLConfigReference</A> 
</I>&gt;<i> ), a PDF layer may be mapped to a map layer.
</I>
Yes, mostly. Basically most recent PDF viewers support the idea of  
layers, such that users can turn various layers on and off, adding  
interactivity and usefulness of the document, particularly when map  
data is included. Being able to maintain the exact &quot;&lt;Layer&gt;&quot; elements  
created by a user authoring a Mapnik XML file as &quot;layers&quot; in the  
resulting PDF file would be an excellent thing, but potentially users  
would also want combinations of Mapnik &lt;Layer&gt;'s to be exposed as PDF  
&quot;layers&quot;.

&gt;<i> Hiding a PDF layer in a PDF viewer should cause the 'status'  
</I>&gt;<i> attribute of the corresponding map layer to be set to OFF, causing  
</I>&gt;<i> it not be rendered.
</I>&gt;<i>
</I>
Not exactly. The 'status' attribute for Mapnik does determine whether  
the user wants the layer rendered. But this only applies to Mapnik and  
once the PDF was written this attribute does not apply, as some other  
mechanism in the PDF viewer would be used by the user to turn on and  
off the layers.

&gt;<i> Finally, I read that Tom Hughes wrote a Cairo-based renderer, but I  
</I>&gt;<i> would like to ask you if these features are already covered by it.
</I>
They are not yet supported by our usage in the Cairo renderer. But the  
Cairo API could certainly be used to implement these within Mapnik.


Great stuff. Keep on asking questions!

Thanks,

Dane

&gt;<i>
</I>&gt;<i> I'll do some research before replying to Mr. Pavlenko's and Mr.  
</I>&gt;<i> Marquardt ideas. There's also an idea from Ben Moores about  
</I>&gt;<i> automatic legend generation; is it related to what you say about  
</I>&gt;<i> legends, Mr. Marquardt?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Carlos L&#243;pez
</I>&gt;<i>
</I>&gt;<i> 2010/3/20 Robert Coup &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">robert.coup at onetrackmind.co.nz</A>&gt;
</I>&gt;<i> Hi Carlos,
</I>&gt;<i>
</I>&gt;<i> 2010/3/21 Carlos Enrique L&#243;pez Garc&#233;s &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">ccaarlooss at gmail.com</A>&gt;:
</I>&gt;<i> &gt; Good evening Mapnik community,
</I>&gt;<i> &gt; I've been searching for information about the 'Better Print  
</I>&gt;<i> Support' project
</I>&gt;<i> &gt; idea and I was wondiering if anyone could tell me how to contact  
</I>&gt;<i> Tom Carden.
</I>&gt;<i> &gt; He submitted the project idea, so I thought it would be a good  
</I>&gt;<i> idea to ask
</I>&gt;<i> &gt; him about it. Any suggestions will be really appreciated. Thanks.
</I>&gt;<i>
</I>&gt;<i> It's also worth having a look at the code on the (abandoned) wxpdf
</I>&gt;<i> branch. See this post (and others by Ben) to have a look:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.mail-archive.com/mapnik-devel@lists.berlios.de/">http://www.mail-archive.com/mapnik-devel@lists.berlios.de/</A> 
</I>&gt;<i> msg00140.html
</I>&gt;<i>
</I>&gt;<i> it has/had some cool features which could be worth porting to a
</I>&gt;<i> Cairo-based PDF renderer.
</I>&gt;<i>  * paper sizes/scale calculations
</I>&gt;<i>  * grids/graticules
</I>&gt;<i>  * overlay images, including other PDFs
</I>&gt;<i>  * scale bars
</I>&gt;<i>  * borders around the map, with coordinates
</I>&gt;<i>  * outputting map layers as true PDF layers. This allows turning on &amp;
</I>&gt;<i> off individual layers in a PDF viewer.
</I>&gt;<i>
</I>&gt;<i> The addition of SVG symbol support makes things more scalable too...
</I>&gt;<i>
</I>&gt;<i> Rob :)
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mapnik-devel mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-devel at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-devel">https://lists.berlios.de/mailman/listinfo/mapnik-devel</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/mapnik-users/attachments/20100328/fc31e499/attachment.html">https://lists.berlios.de/pipermail/mapnik-users/attachments/20100328/fc31e499/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003119.html">[Mapnik-users] [Mapnik-devel] Better Print Support GSoC's	project
</A></li>
	<LI>Next message: <A HREF="003124.html">[Mapnik-users] [Mapnik-devel] Better Print Support GSoC's	project
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3123">[ date ]</a>
              <a href="thread.html#3123">[ thread ]</a>
              <a href="subject.html#3123">[ subject ]</a>
              <a href="author.html#3123">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
