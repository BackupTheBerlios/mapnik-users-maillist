<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] adding attributes when rendering to SVG
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2011-November/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20adding%20attributes%20when%20rendering%20to%20SVG&In-Reply-To=%3CCAL9O_mM_wfPN3u4hDFFy6qWWS%2Bj_masf8nYDcL58wTxVtdHv%2BQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004676.html">
   <LINK REL="Next"  HREF="004678.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] adding attributes when rendering to SVG</H1>
    <B>Matt Bartolome</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20adding%20attributes%20when%20rendering%20to%20SVG&In-Reply-To=%3CCAL9O_mM_wfPN3u4hDFFy6qWWS%2Bj_masf8nYDcL58wTxVtdHv%2BQ%40mail.gmail.com%3E"
       TITLE="[Mapnik-users] adding attributes when rendering to SVG">mattxbart at gmail.com
       </A><BR>
    <I>Tue Nov 22 21:35:33 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004676.html">[Mapnik-users] adding attributes when rendering to SVG
</A></li>
        <LI>Next message: <A HREF="004678.html">[Mapnik-users] adding attributes when rendering to SVG
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4677">[ date ]</a>
              <a href="thread.html#4677">[ thread ]</a>
              <a href="subject.html#4677">[ subject ]</a>
              <a href="author.html#4677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Anthony,
I was looking for the same thing and ended up rendering my svg paths
and attribute data as json then using the Raphael JavaScript Library
to render the data on screen. That library is really nice; it has some
very handy functions for interacting with SVG path elements, which
also can be handled by jquery $(element). It also does svg transforms
and matrices in the 2.0 version which really helps when you are trying
to draw geographic coordinate based stuff.

-Matt

On Tue, Nov 22, 2011 at 11:51 AM, Anthony Pesce &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">anthonyjpesce at gmail.com</A>&gt; wrote:
&gt;<i> Hi all,
</I>&gt;<i> I'm using Mapnik (702 Python bindings) to convert a shp file to an SVG.
</I>&gt;<i> Ultimately, I would like to use the SVG to make an interactive map on the
</I>&gt;<i> web -- but that requires attaching an ID attribute to the SVG path elements.
</I>&gt;<i> It would be great if I could choose one of the attributes from the polygons
</I>&gt;<i> on the shp file to use at the ID for the corresponding path in the SVG, but
</I>&gt;<i> I can't see a way to accomplish this.
</I>&gt;<i> Here's the code I'm using to make the SVG:
</I>&gt;<i> import mapnik
</I>&gt;<i> # Define the projection
</I>&gt;<i> prj = &quot;+proj=aea +lat_1=27.5 +lat_2=35 +lat_0=18 +lon_0=-100 +x_0=1500000
</I>&gt;<i> +y_0=6000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs&quot;
</I>&gt;<i> # Create the Map
</I>&gt;<i> m = mapnik.Map(620, 800, prj)
</I>&gt;<i> # Set some basic styling
</I>&gt;<i> m.background = mapnik.Color('#ffffff')
</I>&gt;<i> s = mapnik.Style()
</I>&gt;<i> r = mapnik.Rule()
</I>&gt;<i> r.symbols.append(mapnik.PolygonSymbolizer(mapnik.Color('#dddddd')))
</I>&gt;<i> r.symbols.append(mapnik.LineSymbolizer(mapnik.Color('#ffffff'),1))
</I>&gt;<i> s.rules.append(r)
</I>&gt;<i> m.append_style('My Style', s)
</I>&gt;<i> # Load in the shp file
</I>&gt;<i> shape = mapnik.Shapefile(file='file.shp')
</I>&gt;<i> # Setup a layer for our shp file
</I>&gt;<i> lyr = mapnik.Layer('US', prj)
</I>&gt;<i> # Load the shp onto the map
</I>&gt;<i> lyr.datasource = shape
</I>&gt;<i> lyr.styles.append('My Style')
</I>&gt;<i> m.layers.append(lyr)
</I>&gt;<i> m.zoom_to_box(lyr.envelope())
</I>&gt;<i> # spit out the SVG
</I>&gt;<i> mapnik.render_to_file(m,'US.svg', 'svg')
</I>&gt;<i> Thanks,
</I>&gt;<i> Anthony Pesce
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mapnik-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004676.html">[Mapnik-users] adding attributes when rendering to SVG
</A></li>
	<LI>Next message: <A HREF="004678.html">[Mapnik-users] adding attributes when rendering to SVG
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4677">[ date ]</a>
              <a href="thread.html#4677">[ thread ]</a>
              <a href="subject.html#4677">[ subject ]</a>
              <a href="author.html#4677">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
