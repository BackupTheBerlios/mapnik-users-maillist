<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Performance considerations
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Performance%20considerations&In-Reply-To=%3C4B69D4C6.9070903%40remote.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002941.html">
   <LINK REL="Next"  HREF="002955.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Performance considerations</H1>
    <B>Frederik Ramm</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Performance%20considerations&In-Reply-To=%3C4B69D4C6.9070903%40remote.org%3E"
       TITLE="[Mapnik-users] Performance considerations">frederik at remote.org
       </A><BR>
    <I>Wed Feb  3 20:55:50 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002941.html">[Mapnik-users] Performance considerations
</A></li>
        <LI>Next message: <A HREF="002955.html">[Mapnik-users] Performance considerations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2944">[ date ]</a>
              <a href="thread.html#2944">[ thread ]</a>
              <a href="subject.html#2944">[ subject ]</a>
              <a href="author.html#2944">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Marcin Rudowski wrote:
&gt;<i> When I optimized my xml file, I turned off all layers (status=off) and
</I>&gt;<i> enabled by one and measured time of each separately to find which are
</I>&gt;<i> slowest and at which zoom.
</I>
There are two useful (for me, at least) Perl scripts (or hacks if you 
prefer) in applications/rendering/mapnik/utils in the OpenStreetMap SVN. 
Both might require some tweaking to work for you.

&quot;stylecheck.pl&quot; creates a list of SQL queries that will be issued at 
various zoom levels. This can help you with a quick indication whether 
you might suffer from the problem that Marcin described here, namely a 
fairly detailed SQL query that has been pulled to the low zoom levels 
(&quot;oh, it does a 'where highway is not null' query on my large table 
beginning with zoom level 5... not good&quot;).

This script only needs your map file as input.

The more complex analyze_posgis_log.pl will load a PostGIS log file 
together with your style file and then use the timings from the SQL 
queries in the PostGIS log to tell you which layers, at which zoom 
levels, need most of the time. It guesses the zoom level from the extent 
specified in the SQL query.

As I said, it's all a bit hack-ish but it helped me optimise things a 
lot, and I thought I'd share it so maybe it is of use to others.

Bye
Frederik

-- 
Frederik Ramm  ##  eMail <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">frederik at remote.org</A>  ##  N49&#176;00'09&quot; E008&#176;23'33&quot;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002941.html">[Mapnik-users] Performance considerations
</A></li>
	<LI>Next message: <A HREF="002955.html">[Mapnik-users] Performance considerations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2944">[ date ]</a>
              <a href="thread.html#2944">[ thread ]</a>
              <a href="subject.html#2944">[ subject ]</a>
              <a href="author.html#2944">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
