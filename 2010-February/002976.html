<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Write error in render_to_file in 0.7
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Write%20error%20in%20render_to_file%20in%200.7&In-Reply-To=%3C1266477540069-4590403.post%40n2.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002987.html">
   <LINK REL="Next"  HREF="002977.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Write error in render_to_file in 0.7</H1>
    <B>NopMap</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Write%20error%20in%20render_to_file%20in%200.7&In-Reply-To=%3C1266477540069-4590403.post%40n2.nabble.com%3E"
       TITLE="[Mapnik-users] Write error in render_to_file in 0.7">ekkehart at gmx.de
       </A><BR>
    <I>Thu Feb 18 08:19:00 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002987.html">[Mapnik-users] WMS client for ogcserver
</A></li>
        <LI>Next message: <A HREF="002977.html">[Mapnik-users] Write error in render_to_file in 0.7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2976">[ date ]</a>
              <a href="thread.html#2976">[ thread ]</a>
              <a href="subject.html#2976">[ subject ]</a>
              <a href="author.html#2976">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi!

In my python render script, I am using render_to_file() to write the render
result to a ram disk and then read it again to do some post processing in
PIL. This works thousands of times in a row, but occasionally it fails with
the following error message.


    render_to_file( m, tmp_file )
RuntimeError: Could not write file to r:/hill_tmp.png

This has happened several times and I could not find an obvious reason:
- The ram disk has plenty of free space
- The file can be manipulated and deleted manually after the error message
has occurred (but the script has exited at that time)
- If I restart the script, it works - for a time
- The file is only opened once for reading in PIL, all writing is done to a
different drive

I have used the same rendering script for hundreds of thousands of tiles
with 0.6.1 and never encountered this problem. It has occurred several times
since I switched to 0.7. It is hard to debug as it only happends every 1000
renders or so.

Has anybody observed similar problems?
Is there any chance that mapnik does not close a file properly after
render_to_file under rare circumstances? It's the only plausible idea I have
so far.

bye
            Nop

-- 
View this message in context: <A HREF="http://n2.nabble.com/Write-error-in-render-to-file-in-0-7-tp4590403p4590403.html">http://n2.nabble.com/Write-error-in-render-to-file-in-0-7-tp4590403p4590403.html</A>
Sent from the Mapnik Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002987.html">[Mapnik-users] WMS client for ogcserver
</A></li>
	<LI>Next message: <A HREF="002977.html">[Mapnik-users] Write error in render_to_file in 0.7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2976">[ date ]</a>
              <a href="thread.html#2976">[ thread ]</a>
              <a href="subject.html#2976">[ subject ]</a>
              <a href="author.html#2976">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
