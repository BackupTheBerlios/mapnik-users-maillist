<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Mapnik 0.7 and text placement
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Mapnik%200.7%20and%20text%20placement&In-Reply-To=%3C4B696B0B.6010808%40xs4all.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002928.html">
   <LINK REL="Next"  HREF="002930.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Mapnik 0.7 and text placement</H1>
    <B>Lennard</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Mapnik%200.7%20and%20text%20placement&In-Reply-To=%3C4B696B0B.6010808%40xs4all.nl%3E"
       TITLE="[Mapnik-users] Mapnik 0.7 and text placement">ldp at xs4all.nl
       </A><BR>
    <I>Wed Feb  3 13:24:43 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002928.html">[Mapnik-users] Mapnik 0.7 and text placement
</A></li>
        <LI>Next message: <A HREF="002930.html">[Mapnik-users] Mapnik 0.7 and text placement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2929">[ date ]</a>
              <a href="thread.html#2929">[ thread ]</a>
              <a href="subject.html#2929">[ subject ]</a>
              <a href="author.html#2929">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>NopMap wrote:

&gt;<i> It appears that something has changed about text or icon placement in mapnik
</I>&gt;<i> 0.7.
</I>
Indeed it has. The default vertical_alignment, which has been 'middle' 
for some time, is now dependent on the value of dy. This has been done 
to cleanly work with the most prevalent usage of dy, which is putting a 
label adjacent to a symbol, while now also accomodating multiline labels 
without issues.

Previously, if you positioned a label (with dy) to appear just below (or 
over) a symbol, it was fine. Until the label wrapped. In that case, part 
of the label, the top line, was overlapping the symbol, and the whole 
label was dropped.

I've outlined this, with a few example pictures, in trac ticket 485 
(<A HREF="http://trac.mapnik.org/ticket/485">http://trac.mapnik.org/ticket/485</A>).

In the cases where you just want to nudge the label a few pixels, you 
can still do that if you add vertical_alignment='middle'.

&gt;<i> When I change dy to 0, the text jumps 6 pixels down and is inside. While
</I>&gt;<i> some texts are exactly in the right place, some are still off by 1 pixel.
</I>
I've noticed the 1px variance before. I believe it has everything to do 
with rounding to screen pixels, and nothing with the issue above.

&gt;<i> Was there a deliberate change in text placement in 0.7?
</I>&gt;<i> What is the unit for dx/dy? I would have expected pixels, but it seems to be
</I>
The unit is still pixels, but I agree the current behaviour can catch 
you by surprise. I was sure this change made it into the 0.7.0 Changelog 
(<A HREF="http://trac.mapnik.org/wiki/Release0.7.0">http://trac.mapnik.org/wiki/Release0.7.0</A>), but it seems it didn't.

-- 
Lennard

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002928.html">[Mapnik-users] Mapnik 0.7 and text placement
</A></li>
	<LI>Next message: <A HREF="002930.html">[Mapnik-users] Mapnik 0.7 and text placement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2929">[ date ]</a>
              <a href="thread.html#2929">[ thread ]</a>
              <a href="subject.html#2929">[ subject ]</a>
              <a href="author.html#2929">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
