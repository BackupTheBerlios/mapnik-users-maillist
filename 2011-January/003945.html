<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] SVG PointSymbolizer with cascadenik
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2011-January/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20SVG%20PointSymbolizer%20with%20cascadenik&In-Reply-To=%3C8BBBD39C-BB5B-4A1C-92D5-793099FB0D5E%40dbsgeo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003941.html">
   <LINK REL="Next"  HREF="003942.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] SVG PointSymbolizer with cascadenik</H1>
    <B>Dane Springmeyer</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20SVG%20PointSymbolizer%20with%20cascadenik&In-Reply-To=%3C8BBBD39C-BB5B-4A1C-92D5-793099FB0D5E%40dbsgeo.com%3E"
       TITLE="[Mapnik-users] SVG PointSymbolizer with cascadenik">dane at dbsgeo.com
       </A><BR>
    <I>Fri Jan 28 22:36:36 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003941.html">[Mapnik-users] SVG PointSymbolizer with cascadenik
</A></li>
        <LI>Next message: <A HREF="003942.html">[Mapnik-users] generating large high-resolution google-maps-like	images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3945">[ date ]</a>
              <a href="thread.html#3945">[ thread ]</a>
              <a href="subject.html#3945">[ subject ]</a>
              <a href="author.html#3945">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Michael,

SVG support has only recently been added to Mapnik, and is currently just available only in the development code (current trunk, aka Mapnik2).

So, in the future this will be way easier but for now requires some special steps.

If you are running Mac OS X I have a Mapnik2 installer I'm working on, so get in touch off list if you want to try that (just in beta testing).

As far as Mapnik2 on linux, find build instructions at <A HREF="http://trac.mapnik.org/wiki/Mapnik2.">http://trac.mapnik.org/wiki/Mapnik2.</A>

Regarding Cascadenik we have a branch in the works to support Mapnik 2.0 which you can get to at github:

<A HREF="https://github.com/mapnik/Cascadenik/">https://github.com/mapnik/Cascadenik/</A>

View by selecting the &quot;Mapnik2&quot; dropdown on the branches link on the left side.

And checkout the code like:

git clone <A HREF="git://github.com/mapnik/Cascadenik.git">git://github.com/mapnik/Cascadenik.git</A>
cd Cascadenik
git branch -a
git checkout mapnik2

Dane


On Jan 28, 2011, at 10:35 AM, Michael Corey wrote:

&gt;<i> Hi all:
</I>&gt;<i> 
</I>&gt;<i> Apologies if this is a repeat post -- I'm not sure if this actually made it on the listserv yesterday.
</I>&gt;<i> 
</I>&gt;<i> I'm having a problem getting an SVG image to work as a PointSymbolizer when running cascadenik-compile.py.
</I>&gt;<i> 
</I>&gt;<i> Here's the CSS I'm using:
</I>&gt;<i> 
</I>&gt;<i>        .alluncertified
</I>&gt;<i>        {
</I>&gt;<i>            point-file: url('/Users/semchie/Documents/CIR/seismic/mapnik/uncertified/testpoint8.svg');
</I>&gt;<i>            point-width : 8 ;
</I>&gt;<i>            point-height : 8 ;
</I>&gt;<i>            point-allow-overlap : true ;
</I>&gt;<i>        }
</I>&gt;<i> 
</I>&gt;<i> This works fine if I switch to a .png image, but when I run cascadenik-compile.py with the .svg I get the following error:
</I>&gt;<i> 
</I>&gt;<i> traceback (most recent call last):
</I>&gt;<i>  File &quot;/usr/local/bin/cascadenik-compile.py&quot;, line 5, in &lt;module&gt;
</I>&gt;<i>    pkg_resources.run_script('cascadenik==1.0.2', 'cascadenik-compile.py')
</I>&gt;<i>  File &quot;/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.py&quot;, line 442, in run_script
</I>&gt;<i>    self.require(requires)[0].run_script(script_name, ns)
</I>&gt;<i>  File &quot;/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.py&quot;, line 1160, in run_script
</I>&gt;<i>    execfile(script_filename, namespace, namespace)
</I>&gt;<i>  File &quot;/Library/Python/2.6/site-packages/cascadenik-1.0.2-py2.6.egg/EGG-INFO/scripts/cascadenik-compile.py&quot;, line 92, in &lt;module&gt;
</I>&gt;<i>    sys.exit(main(layersfile, outputfile, **options.__dict__))
</I>&gt;<i>  File &quot;/Library/Python/2.6/site-packages/cascadenik-1.0.2-py2.6.egg/EGG-INFO/scripts/cascadenik-compile.py&quot;, line 33, in main
</I>&gt;<i>    cascadenik.load_map(mmap, src_file, dirname(realpath(dest_file)), **load_kwargs)
</I>&gt;<i>  File &quot;/Library/Python/2.6/site-packages/cascadenik-1.0.2-py2.6.egg/cascadenik/__init__.py&quot;, line 65, in load_map
</I>&gt;<i>    compile(src_file, dirs, verbose, datasources_cfg=datasources_cfg).to_mapnik(map, dirs)
</I>&gt;<i>  File &quot;/Library/Python/2.6/site-packages/cascadenik-1.0.2-py2.6.egg/cascadenik/compile.py&quot;, line 1547, in compile
</I>&gt;<i>    get_point_rules(layer_declarations, dirs)))
</I>&gt;<i>  File &quot;/Library/Python/2.6/site-packages/cascadenik-1.0.2-py2.6.egg/cascadenik/compile.py&quot;, line 1221, in get_point_rules
</I>&gt;<i>    and post_process_symbolizer_image_file(str(values['point-file'].value), dirs) \
</I>&gt;<i>  File &quot;/Library/Python/2.6/site-packages/cascadenik-1.0.2-py2.6.egg/cascadenik/compile.py&quot;, line 1104, in post_process_symbolizer_image_file
</I>&gt;<i>    img = Image.open(un_posix(path))
</I>&gt;<i>  File &quot;/Library/Python/2.6/site-packages/PIL-1.1.7-py2.6-macosx-10.6-universal.egg/Image.py&quot;, line 1980, in open
</I>&gt;<i>    raise IOError(&quot;cannot identify image file&quot;)
</I>&gt;<i> IOError: cannot identify image file
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Is this likely a more general problem with .SVGs in cascadenik, or am I perhaps having problems because of the way I exported the .SVG? I used Adobe Illustrator with these settings:
</I>&gt;<i> 
</I>&gt;<i> SVG profiles: SVG 1.1
</I>&gt;<i> Type: SVG
</I>&gt;<i> Images
</I>&gt;<i> Location: Embed
</I>&gt;<i> 
</I>&gt;<i> This produces this for the SVG body:
</I>&gt;<i> &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
</I>&gt;<i> &lt;!-- Generator: Adobe Illustrator 14.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 43363)  --&gt;
</I>&gt;<i> &lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot; &quot;<A HREF="http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd</A>&quot;&gt;
</I>&gt;<i> &lt;svg version=&quot;1.1&quot; id=&quot;Layer_1&quot; xmlns=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot; xmlns:xlink=&quot;<A HREF="http://www.w3.org/1999/xlink">http://www.w3.org/1999/xlink</A>&quot; x=&quot;0px&quot; y=&quot;0px&quot;
</I>&gt;<i>     width=&quot;800px&quot; height=&quot;600px&quot; viewBox=&quot;0 0 800 600&quot; enable-background=&quot;new 0 0 800 600&quot; xml:space=&quot;preserve&quot;&gt;
</I>&gt;<i> &lt;circle fill=&quot;#C1272D&quot; stroke=&quot;#000000&quot; cx=&quot;295.643&quot; cy=&quot;155.5&quot; r=&quot;20.357&quot;/&gt;
</I>&gt;<i> &lt;/svg&gt;
</I>&gt;<i> 
</I>&gt;<i> Michael Corey
</I>&gt;<i> Digital Innovations Editor
</I>&gt;<i> Center for Investigative Reporting
</I>&gt;<i> 510.809.3178
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mapnik-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003941.html">[Mapnik-users] SVG PointSymbolizer with cascadenik
</A></li>
	<LI>Next message: <A HREF="003942.html">[Mapnik-users] generating large high-resolution google-maps-like	images
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3945">[ date ]</a>
              <a href="thread.html#3945">[ thread ]</a>
              <a href="subject.html#3945">[ subject ]</a>
              <a href="author.html#3945">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
