<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Issue with low-quality PNG output on Ubuntu 10.10	(mapnik 0.7.1)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2011-October/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Issue%20with%20low-quality%20PNG%20output%20on%20Ubuntu%2010.10%0A%09%28mapnik%200.7.1%29&In-Reply-To=%3COF3D46FCE4.C96DBD8A-ON8025792B.0044FA70-8025792B.0044FA71%40solent.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004608.html">
   <LINK REL="Next"  HREF="004612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Issue with low-quality PNG output on Ubuntu 10.10	(mapnik 0.7.1)</H1>
    <B>Nick Whitelegg</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Issue%20with%20low-quality%20PNG%20output%20on%20Ubuntu%2010.10%0A%09%28mapnik%200.7.1%29&In-Reply-To=%3COF3D46FCE4.C96DBD8A-ON8025792B.0044FA70-8025792B.0044FA71%40solent.ac.uk%3E"
       TITLE="[Mapnik-users] Issue with low-quality PNG output on Ubuntu 10.10	(mapnik 0.7.1)">Nick.Whitelegg at solent.ac.uk
       </A><BR>
    <I>Sun Oct 16 14:33:25 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004608.html">[Mapnik-users] MapNik - Cairo - Installation on Windows
</A></li>
        <LI>Next message: <A HREF="004612.html">[Mapnik-users] Issue with low-quality PNG output on Ubuntu	10.10 (mapnik 0.7.1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4611">[ date ]</a>
              <a href="thread.html#4611">[ thread ]</a>
              <a href="subject.html#4611">[ subject ]</a>
              <a href="author.html#4611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I *think* this happened when I upgraded Ubuntu from 10.04 to 10.10 back in March, and I *think* previously I was using a version of mapnik compiled from source whereas now I use the standard ubuntu package.&#160; I know that was a long time ago - but I'm only now getting back to this project.

But anyway.. I'm trying to render Ordnance Survey Land Form Panorama contours using mapnik, with the aim of compositing them with OS VectorMapDistrict raster tiles and OSM footpath data. The contours are stored in a postgis database. I have a custom C++ application which renders the contours with mapnik, and then composites them with the Vector Map District using gd.

The problem is&#160; that mapnik (0.7.1 with ubuntu 10.10) appears to only render the contours as a 4-bit images, and unantialiased, which means the contours don't look great. The same version of mapnik renders OSM data fine (256 bit pngs) and, on a previous run, (which I think was before I upgraded the OS, and was using Ubuntu 10.04 with - IIRC - a compiled-from-source version of Mapnik) the contours were rendered as antialiased 8-bit images too.

To see what I mean see

<A HREF="http://www.free-map.org.uk/expts/vmdlfp200/index.php?e=400000&amp;n=149000">http://www.free-map.org.uk/expts/vmdlfp200/index.php?e=400000&amp;n=149000</A>

and compare the contours to the east of that position (higher quality) and to the west (lower quality). The area to the west was rendered later, with the current setup.

Occasionally the contour lines are not coloured at all and just render black! (e.g. just to the N of the position above).

The source code of the application is at
<A HREF="http://www.free-map.org.uk/svn/freemap/opendata/lfpvmd.cpp">http://www.free-map.org.uk/svn/freemap/opendata/lfpvmd.cpp</A>

and map.xml is the accompanying Mapnik XML file.

Apologies if I'm a bit vague about this, but it was something I was last working on more than 6 months ago and the time this problem arose was about the time I upgraded my system. But has anyone else had similar problems, or recognise the issue?

Thanks,
Nick

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/mapnik-users/attachments/20111016/c62283a2/attachment.html">https://lists.berlios.de/pipermail/mapnik-users/attachments/20111016/c62283a2/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004608.html">[Mapnik-users] MapNik - Cairo - Installation on Windows
</A></li>
	<LI>Next message: <A HREF="004612.html">[Mapnik-users] Issue with low-quality PNG output on Ubuntu	10.10 (mapnik 0.7.1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4611">[ date ]</a>
              <a href="thread.html#4611">[ thread ]</a>
              <a href="subject.html#4611">[ subject ]</a>
              <a href="author.html#4611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
