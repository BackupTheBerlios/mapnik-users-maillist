<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Mapnik zoom_all c++ API with dynamic layers
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2010-October/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Mapnik%20zoom_all%20c%2B%2B%20API%20with%20dynamic%20layers&In-Reply-To=%3C5ED0B147-FCF3-4907-9A80-1355C13CBC0D%40dbsgeo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003682.html">
   <LINK REL="Next"  HREF="003684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Mapnik zoom_all c++ API with dynamic layers</H1>
    <B>Dane Springmeyer</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Mapnik%20zoom_all%20c%2B%2B%20API%20with%20dynamic%20layers&In-Reply-To=%3C5ED0B147-FCF3-4907-9A80-1355C13CBC0D%40dbsgeo.com%3E"
       TITLE="[Mapnik-users] Mapnik zoom_all c++ API with dynamic layers">dane at dbsgeo.com
       </A><BR>
    <I>Tue Oct 19 19:15:02 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003682.html">[Mapnik-users]  Mapnik zoom_all c++ API with dynamic layers
</A></li>
        <LI>Next message: <A HREF="003684.html">[Mapnik-users] Mapnik zoom_all c++ API with dynamic layers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3683">[ date ]</a>
              <a href="thread.html#3683">[ thread ]</a>
              <a href="subject.html#3683">[ subject ]</a>
              <a href="author.html#3683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 18, 2010, at 8:37 AM, mjb1999 wrote:

&gt;<i> 
</I>&gt;<i> I am writing a small Mapnik viewer application using c++, much like the
</I>&gt;<i> viewer demo application.
</I>
Curious, is there a reason you are not using/extending the viewer? Are you using a different GUI framework than QT?

&gt;<i> I load a map from an XML file and I display it on
</I>&gt;<i> screen. 
</I>&gt;<i> 
</I>&gt;<i> In this application, I give the user the option to view the entire map in
</I>&gt;<i> the window. I use the zoom_all() function to accomplish this, and it works
</I>&gt;<i> fine. However, I also add a point_datasource() layer that dynamically shows
</I>&gt;<i> a GPS position. When I do this, the zoom_all() function no longer works as
</I>&gt;<i> expected. The map area is much larger than I would expect.
</I>&gt;<i> 
</I>
Okay, interesting. Are the point datasource geometries in the same coordinate system as your map? Are you remembering to set the proper srs for the layer you are adding the point datasource to?

&gt;<i> I am thinking that my problem is that I do not specify the extent of the
</I>&gt;<i> dynamic layer when I create it, but I am not sure how to do this.
</I>
Point Datasource inherits from the Memory Datasource (which you could use directly). But, either way the extent *should* be calculated for you automatically when the datasource.envelope() is called for the layer. For the memory datasource that happens here:

<A HREF="http://trac.mapnik.org/browser/trunk/src/memory_datasource.cpp#L31">http://trac.mapnik.org/browser/trunk/src/memory_datasource.cpp#L31</A>

The code looks fine to me on first glance, but you may be seeing a bug. Please let me know what you find and if you can narrow it to a small testcase.

Dane


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003682.html">[Mapnik-users]  Mapnik zoom_all c++ API with dynamic layers
</A></li>
	<LI>Next message: <A HREF="003684.html">[Mapnik-users] Mapnik zoom_all c++ API with dynamic layers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3683">[ date ]</a>
              <a href="thread.html#3683">[ thread ]</a>
              <a href="subject.html#3683">[ subject ]</a>
              <a href="author.html#3683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
