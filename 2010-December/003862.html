<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Cookies or CGI params from BaseWMSFactory	subclass in an ogcserver
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2010-December/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Cookies%20or%20CGI%20params%20from%20BaseWMSFactory%0A%09subclass%20in%20an%20ogcserver&In-Reply-To=%3C2D84F86F-B8F8-4130-A038-9D95660AF273%40dbsgeo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003854.html">
   <LINK REL="Next"  HREF="003859.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Cookies or CGI params from BaseWMSFactory	subclass in an ogcserver</H1>
    <B>Dane Springmeyer</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Cookies%20or%20CGI%20params%20from%20BaseWMSFactory%0A%09subclass%20in%20an%20ogcserver&In-Reply-To=%3C2D84F86F-B8F8-4130-A038-9D95660AF273%40dbsgeo.com%3E"
       TITLE="[Mapnik-users] Cookies or CGI params from BaseWMSFactory	subclass in an ogcserver">dane at dbsgeo.com
       </A><BR>
    <I>Thu Dec 23 21:35:09 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003854.html">[Mapnik-users] Cookies or CGI params from BaseWMSFactory subclass	in an ogcserver
</A></li>
        <LI>Next message: <A HREF="003859.html">[Mapnik-users] Cascadenik installation strangeness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3862">[ date ]</a>
              <a href="thread.html#3862">[ thread ]</a>
              <a href="subject.html#3862">[ subject ]</a>
              <a href="author.html#3862">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Dan,

The ogcserver does not currently support url-based variable substitution in the query string, but this is something that could be added.

I'd need to take a look at the code (after the holidays :)) to scope whether templating XML (then loading from a string) would be easier than trying to have the variable trickle down to the actual mapnik.Datasource object. Both would require some solid coding to get working.

Dane


On Dec 22, 2010, at 3:34 PM, Dan Lyke wrote:

&gt;<i> So assuming I can get my other issue with projections or whatever it is
</I>&gt;<i> in my WMSFactory versus code saving to render_to_file, the next thing I
</I>&gt;<i> want is to serve up more complex queries.
</I>&gt;<i> 
</I>&gt;<i> For instance, I've been tossing stuff into PostGIS and playing with
</I>&gt;<i> queries like:
</I>&gt;<i> 
</I>&gt;<i> BUFFERED_TABLE = &quot;(SELECT DISTINCT(par_parcels.the_geom) FROM
</I>&gt;<i>   par_parcels , hyd_usgsstrm WHERE ST_DWithin(par_parcels.the_geom,
</I>&gt;<i>   hyd_usgsstrm.the_geom, 1)) AS the_geom&quot;
</I>&gt;<i> 
</I>&gt;<i> lyr.datasource = mapnik.PostGIS(
</I>&gt;<i>        dbname='sonoma',
</I>&gt;<i>        table=BUFFERED_TABLE)
</I>&gt;<i> 
</I>&gt;<i> to show me all parcels that lie within 1 meter of a stream (and, yes, I
</I>&gt;<i> do need to think a little bit about my query efficiency, and that space
</I>&gt;<i> after &quot;FROM par_parcels&quot; is necessary because Mapnik is doing some sort
</I>&gt;<i> of regular expression matching that doesn't do well with multiple
</I>&gt;<i> tables).
</I>&gt;<i> 
</I>&gt;<i> I'd like to pass elements of that query through from the parent web
</I>&gt;<i> page. So: How do I get to the CGI query string, or, if I have to go
</I>&gt;<i> that way, cookie information, from the BaseWMSFactory subclass? Do I
</I>&gt;<i> need to go straight to the environment and decode it myself?
</I>&gt;<i> 
</I>&gt;<i> Thanks!
</I>&gt;<i> 
</I>&gt;<i> Dan
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mapnik-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003854.html">[Mapnik-users] Cookies or CGI params from BaseWMSFactory subclass	in an ogcserver
</A></li>
	<LI>Next message: <A HREF="003859.html">[Mapnik-users] Cascadenik installation strangeness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3862">[ date ]</a>
              <a href="thread.html#3862">[ thread ]</a>
              <a href="subject.html#3862">[ subject ]</a>
              <a href="author.html#3862">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
