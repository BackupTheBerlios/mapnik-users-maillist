<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Debugging mapnik hangs
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Debugging%20mapnik%20hangs&In-Reply-To=%3C1285533277.21801.56.camel%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003618.html">
   <LINK REL="Next"  HREF="003620.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Debugging mapnik hangs</H1>
    <B>Jon Burgess</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Debugging%20mapnik%20hangs&In-Reply-To=%3C1285533277.21801.56.camel%40localhost.localdomain%3E"
       TITLE="[Mapnik-users] Debugging mapnik hangs">jburgess777 at gmail.com
       </A><BR>
    <I>Sun Sep 26 22:34:37 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003618.html">[Mapnik-users] Debugging mapnik hangs
</A></li>
        <LI>Next message: <A HREF="003620.html">[Mapnik-users] Debugging mapnik hangs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3619">[ date ]</a>
              <a href="thread.html#3619">[ thread ]</a>
              <a href="subject.html#3619">[ subject ]</a>
              <a href="author.html#3619">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2010-09-26 at 13:06 -0700, NopMap wrote:
&gt;<i> Thank you for your extensive instructions. Following that guideline, I
</I>&gt;<i> was
</I>&gt;<i> able to get the required info out of the hanging mapnik. At least I
</I>&gt;<i> hope I
</I>&gt;<i> got the right application. :-)
</I>&gt;<i> 
</I>&gt;<i> This is what it says:
</I>&gt;<i> 
</I>&gt;<i> (gdb) thread apply all bt
</I>&gt;<i> 
</I>&gt;<i> Thread 1 (Thread 0x7f93366f0720 (LWP 16030)):
</I>&gt;<i> #0  0x00007f9335f9302d in
</I>&gt;<i> agg::renderer_outline_image&lt;agg::renderer_base&lt;agg::pixfmt_alpha_blend_rgba&lt;agg::blender_rgba_plain&lt;agg::rgba8,
</I>&gt;<i> agg::order_rgba&gt;, agg::row_ptr_cache&lt;unsigned char&gt;, unsigned int&gt; &gt;,
</I>&gt;<i> agg::line_image_pattern&lt;agg::pattern_filter_bilinear_rgba&lt;agg::rgba8&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;::line3(agg::line_parameters const&amp;, int, int, int, int) () from
</I>&gt;<i> /usr/lib/libmapnik.so.0.7
</I>&gt;<i> #1  0x00007f9335f9297d in
</I>&gt;<i> agg::rasterizer_outline_aa&lt;agg::renderer_outline_image&lt;agg::renderer_base&lt;agg::pixfmt_alpha_blend_rgba&lt;agg::blender_rgba_plain&lt;agg::rgba8,
</I>&gt;<i> agg::order_rgba&gt;, agg::row_ptr_cache&lt;unsigned char&gt;, unsigned int&gt; &gt;,
</I>&gt;<i> agg::line_image_pattern&lt;agg::pattern_filter_bilinear_rgba&lt;agg::rgba8&gt;
</I>&gt;<i> &gt; &gt;,
</I>&gt;<i> agg::line_coord&gt;::draw(agg::rasterizer_outline_aa&lt;agg::renderer_outline_image&lt;agg::renderer_base&lt;agg::pixfmt_alpha_blend_rgba&lt;agg::blender_rgba_plain&lt;agg::rgba8,
</I>&gt;<i> agg::order_rgba&gt;, agg::row_ptr_cache&lt;unsigned char&gt;, unsigned int&gt; &gt;,
</I>&gt;<i> agg::line_image_pattern&lt;agg::pattern_filter_bilinear_rgba&lt;agg::rgba8&gt;
</I>&gt;<i> &gt; &gt;,
</I>&gt;<i> agg::line_coord&gt;::draw_vars&amp;, unsigned int, unsigned int) () from
</I>&gt;<i> /usr/lib/libmapnik.so.0.7
</I>&gt;<i> #2  0x00007f9335f8e12d in
</I>&gt;<i> agg::rasterizer_outline_aa&lt;agg::renderer_outline_image&lt;agg::renderer_base&lt;agg::pixfmt_alpha_blend_rgba&lt;agg::blender_rgba_plain&lt;agg::rgba8,
</I>&gt;<i> agg::order_rgba&gt;, agg::row_ptr_cache&lt;unsigned char&gt;, unsigned int&gt; &gt;,
</I>&gt;<i> agg::line_image_pattern&lt;agg::pattern_filter_bilinear_rgba&lt;agg::rgba8&gt;
</I>&gt;<i> &gt; &gt;,
</I>&gt;<i> agg::line_coord&gt;::render(bool) () from /usr/lib/libmapnik.so.0.7
</I>&gt;<i> #3  0x00007f9335f86081 in void
</I>&gt;<i> agg::rasterizer_outline_aa&lt;agg::renderer_outline_image&lt;agg::renderer_base&lt;agg::pixfmt_alpha_blend_rgba&lt;agg::blender_rgba_plain&lt;agg::rgba8,
</I>&gt;<i> agg::order_rgba&gt;, agg::row_ptr_cache&lt;unsigned char&gt;, unsigned int&gt; &gt;,
</I>&gt;<i> agg::line_image_pattern&lt;agg::pattern_filter_bilinear_rgba&lt;agg::rgba8&gt;
</I>&gt;<i> &gt; &gt;,
</I>&gt;<i> agg::line_coord&gt;::add_path&lt;mapnik::coord_transform2&lt;mapnik::CoordTransform,
</I>&gt;<i> mapnik::geometry&lt;mapnik::vertex&lt;double, 2&gt; &gt; &gt;
</I>&gt;<i> &gt;(mapnik::coord_transform2&lt;mapnik::CoordTransform,
</I>&gt;<i> mapnik::geometry&lt;mapnik::vertex&lt;double, 2&gt; &gt; &gt;&amp;, unsigned int) () from
</I>&gt;<i> /usr/lib/libmapnik.so.0.7
</I>&gt;<i> #4  0x00007f9335f7fe16 in
</I>&gt;<i> mapnik::agg_renderer&lt;mapnik::Image32&gt;::process(mapnik::line_pattern_symbolizer
</I>&gt;<i> const&amp;, mapnik::feature&lt;mapnik::geometry&lt;mapnik::vertex&lt;double, 2&gt; &gt;,
</I>&gt;<i> boost::shared_ptr&lt;mapnik::raster&gt; &gt; const&amp;, mapnik::proj_transform
</I>&gt;<i> const&amp;)
</I>&gt;<i> () from /usr/lib/libmapnik.so.0.7
</I>&gt;<i> #5  0x000000000041230f in ?? ()
</I>&gt;<i> #6  0x000000000040f312 in ?? ()
</I>&gt;<i> #7  0x000000000040fce1 in ?? ()
</I>&gt;<i> #8  0x0000000000413271 in ?? ()
</I>&gt;<i> #9  0x0000000000409e0c in ?? ()
</I>&gt;<i> #10 0x000000000040ae5f in ?? ()
</I>&gt;<i> #11 0x00007f93350c9c4d in __libc_start_main () from /lib/libc.so.6
</I>&gt;<i> #12 0x0000000000409ca9 in ?? ()
</I>&gt;<i> #13 0x00007fff125e6e78 in ?? ()
</I>&gt;<i> #14 0x000000000000001c in ?? ()
</I>&gt;<i> #15 0x0000000000000001 in ?? ()
</I>&gt;<i> #16 0x00007fff125e88b6 in ?? ()
</I>&gt;<i> #17 0x0000000000000000 in ?? ()
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Anything suspicious there?
</I>&gt;<i> 
</I>
It looks like your problem is with the LinePatternSymbolizer, similar to
Andy's experience. 

It looks like the copy of the mapnik library used for this test
(/usr/lib/libmapnik.so.0.7) was not built with debug enabled (scons
DEBUG=True). If it included the debug information then there would be
additional data about the function parameters, filenames and line
numbers. It would be useful if you could try to get this extra
information because it really helps narrow down the specific problem
case. 

I will take a look at the code and try to guess where the issue might
occur but it will be impossible to know for certain that we have found
the problem without this additional debug information.

   Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003618.html">[Mapnik-users] Debugging mapnik hangs
</A></li>
	<LI>Next message: <A HREF="003620.html">[Mapnik-users] Debugging mapnik hangs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3619">[ date ]</a>
              <a href="thread.html#3619">[ thread ]</a>
              <a href="subject.html#3619">[ subject ]</a>
              <a href="author.html#3619">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
