<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] osm2pgsql  - z_order
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20osm2pgsql%20%20-%20z_order&In-Reply-To=%3C1235678600.3166.15.camel%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001659.html">
   <LINK REL="Next"  HREF="001662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] osm2pgsql  - z_order</H1>
    <B>Jon Burgess</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20osm2pgsql%20%20-%20z_order&In-Reply-To=%3C1235678600.3166.15.camel%40localhost.localdomain%3E"
       TITLE="[Mapnik-users] osm2pgsql  - z_order">jburgess777 at googlemail.com
       </A><BR>
    <I>Thu Feb 26 21:03:20 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001659.html">[Mapnik-users] osm2pgsql  - z_order
</A></li>
        <LI>Next message: <A HREF="001662.html">[Mapnik-users] Several Questions from a new and confused user.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1661">[ date ]</a>
              <a href="thread.html#1661">[ thread ]</a>
              <a href="subject.html#1661">[ subject ]</a>
              <a href="author.html#1661">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2009-02-26 at 20:07 +0100, Nop wrote:
&gt;<i> Hi!
</I>&gt;<i> 
</I>&gt;<i> Jon Burgess schrieb:
</I>&gt;<i> &gt; For highways, unimportant roads like unclassified and residential are
</I>&gt;<i> &gt; rendered first and the motorways are drawn on top. This ensures that
</I>&gt;<i> &gt; motorways are not obscured by more minor roads. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; In addition, the presence of a layer, tunnel or bridge tag also effects
</I>&gt;<i> &gt; the z_order. This ensures objects on one layer render on top of objects
</I>&gt;<i> &gt; on a lower layer.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The are details which I have glossed over in the description above, you
</I>&gt;<i> &gt; will have to read the source to see the exact calculations. Or ask some
</I>&gt;<i> &gt; more specific questions.
</I>&gt;<i> 
</I>&gt;<i> Thank you, that was pretty much the information I was looking for. In 
</I>&gt;<i> detail, I need to know what tags I can strip during preprocessing and 
</I>&gt;<i> what tags I need to preserve for osm2pgsql.
</I>&gt;<i> 
</I>&gt;<i> Do you know whether the level tag is evaluated for the z_order?
</I>
No, level is not used at all by anything in osm2pgsql. The keys it looks
at to determine z_order are:

layer
highway
bridge
tunnel
railway

Obviously the code works if one or more of the keys are missing from any
particular way, but it will take them into account if they are present.

The calculations are done in:
<A HREF="http://trac.openstreetmap.org/browser/applications/utils/export/osm2pgsql/output-pgsql.c#L280">http://trac.openstreetmap.org/browser/applications/utils/export/osm2pgsql/output-pgsql.c#L280</A>

	Jon



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001659.html">[Mapnik-users] osm2pgsql  - z_order
</A></li>
	<LI>Next message: <A HREF="001662.html">[Mapnik-users] Several Questions from a new and confused user.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1661">[ date ]</a>
              <a href="thread.html#1661">[ thread ]</a>
              <a href="subject.html#1661">[ subject ]</a>
              <a href="author.html#1661">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
