<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Problems building Mapnik (build with	python2.6	and scons.py)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Problems%20building%20Mapnik%20%28build%20with%0A%09python2.6%09and%20scons.py%29&In-Reply-To=%3C030E6018-F826-4038-A36B-929672EBC468%40hailmail.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001645.html">
   <LINK REL="Next"  HREF="001648.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Problems building Mapnik (build with	python2.6	and scons.py)</H1>
    <B>Dane Springmeyer</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Problems%20building%20Mapnik%20%28build%20with%0A%09python2.6%09and%20scons.py%29&In-Reply-To=%3C030E6018-F826-4038-A36B-929672EBC468%40hailmail.net%3E"
       TITLE="[Mapnik-users] Problems building Mapnik (build with	python2.6	and scons.py)">blake at hailmail.net
       </A><BR>
    <I>Tue Feb 24 19:02:50 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001645.html">[Mapnik-users] Missing roads
</A></li>
        <LI>Next message: <A HREF="001648.html">[Mapnik-users]  ogcserver and filter expression in WMS-URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1646">[ date ]</a>
              <a href="thread.html#1646">[ thread ]</a>
              <a href="subject.html#1646">[ subject ]</a>
              <a href="author.html#1646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Martin,

Glad you got it running.

The OGCserver is designed to generate images in the browser  
dynamically and does not save them anywhere. So, if you've got your  
world map appearing with that request then you are good to go. The  
next step would be to set up OpenLayers or some other Client  
application to form up those requests automatically for you so you can  
pan and zoom.

If you want to save the images you should try out Nik2img.py or  
generate_tiles.py.

If you are asking about where the shapefile is located that the map is  
being generated from, that is set in your 'map_factory.py' file which  
the ogcserver.conf points to.

Dane



On Feb 24, 2009, at 3:30 AM, tschobber tsch&#246;bbi wrote:

&gt;<i> Ok, I made it now ;) ...
</I>&gt;<i>
</I>&gt;<i> I'm able to run OGCserver when i type in the following:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://localhost/cgi-bin/mapnikwms.py">http://localhost/cgi-bin/mapnikwms.py</A>
</I>&gt;<i>
</I>&gt;<i> I get this message in firefox browser:
</I>&gt;<i>
</I>&gt;<i> Welcome to the Mapnik OGCServer.
</I>&gt;<i> Ready to accept map requests...
</I>&gt;<i> For more info see: trac.mapnik.org
</I>&gt;<i>
</I>&gt;<i> When I try an example, typing this into my browser:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://localhost/cgi-bin/mapnikwms.py?LAYERS=world&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;EXCEPTIONS=application%2Fvnd.ogc.se_inimage&amp;SRS=EPSG%3A4326&amp;BBOX=-180.0000000000001,-90,119.46385052802589,209.463850528026&amp;WIDTH=256&amp;HEIGHT=256">http://localhost/cgi-bin/mapnikwms.py?LAYERS=world&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;EXCEPTIONS=application%2Fvnd.ogc.se_inimage&amp;SRS=EPSG%3A4326&amp;BBOX=-180.0000000000001,-90,119.46385052802589,209.463850528026&amp;WIDTH=256&amp;HEIGHT=256</A>
</I>&gt;<i>
</I>&gt;<i> It shows me a picture showing a worldmap, but where do I find this  
</I>&gt;<i> file on my system or where did it save my file? In the /tmp  
</I>&gt;<i> directory I didn't find anything and in the cgi-bin directory too.
</I>&gt;<i>
</I>&gt;<i> Martin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Hi Dane,
</I>&gt;<i>
</I>&gt;<i> I've still the same problems - I would really appreciate it if you  
</I>&gt;<i> could help me. I use apache cgi but it still doesn't work. I tried
</I>&gt;<i>
</I>&gt;<i> Martin
</I>&gt;<i> ----------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks again :) ... but I'm still a bit helpless. I've set up an  
</I>&gt;<i> Apache2.2 server with php cli (I've done that the first time :( ).
</I>&gt;<i>
</I>&gt;<i> I made it in this manner:
</I>&gt;<i>
</I>&gt;<i> - I copied the source from <A HREF="http://trac.mapnik.org/wiki/OgcServerSvn">http://trac.mapnik.org/wiki/OgcServerSvn</A>  
</I>&gt;<i> and saved it as WMSFactory.py.
</I>&gt;<i>
</I>&gt;<i> - When I type &quot;python WMSFactory.py&quot; I get the following output in  
</I>&gt;<i> the shell:
</I>&gt;<i>
</I>&gt;<i> registered datasource : postgis
</I>&gt;<i> registered datasource : raster
</I>&gt;<i> registered datasource : shape
</I>&gt;<i> destroyed singleton
</I>&gt;<i> destroyed singleton
</I>&gt;<i> destroyed singleton
</I>&gt;<i>
</I>&gt;<i> - So I edit the httpd.conf and put in the following line:
</I>&gt;<i> AddHandler cgi-script .cgi .py
</I>&gt;<i> (what script is meant in the other option: &quot;... renaming the script  
</I>&gt;<i> to mapnikserv.cgi ...&quot;)
</I>&gt;<i>
</I>&gt;<i> - Then I restarted apache2 server and tried to open the file in the  
</I>&gt;<i> browser:
</I>&gt;<i> <A HREF="http://localhost/cgi-bin/WMSFactory.py">http://localhost/cgi-bin/WMSFactory.py</A>
</I>&gt;<i>
</I>&gt;<i> and got this error:
</I>&gt;<i>
</I>&gt;<i> Error: Premature end of script headers: WMSFactory.py
</I>&gt;<i> Error 500
</I>&gt;<i>
</I>&gt;<i> Am I at least almost on the right way?
</I>&gt;<i>
</I>&gt;<i> Remaining (stupid) questions concerning the Readme.txt of
</I>&gt;<i> <A HREF="http://mapnik-utils.googlecode.com/svn/example_code/wms/readme:">http://mapnik-utils.googlecode.com/svn/example_code/wms/readme:</A>
</I>&gt;<i>
</I>&gt;<i> - What's the path to the wms server? Where can I find it?
</I>&gt;<i> - What about the ogcserver.conf file? What I have to do with it? To  
</I>&gt;<i> where I have to copy it? (Now it's in the downloaded source  
</I>&gt;<i> directory of mapnik)
</I>&gt;<i>
</I>&gt;<i> Sry again for my newbie questions, but I really need your help.
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i>
</I>&gt;<i> Martin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -------- Original-Nachricht --------
</I>&gt;&gt;<i> Datum: Wed, 18 Feb 2009 09:30:40 -0800
</I>&gt;&gt;<i> Von: Dane Springmeyer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">blake at hailmail.net</A>&gt;
</I>&gt;&gt;<i> An: &quot;tschobber tsch&#246;bbi&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">tschobber at gmx.at</A>&gt;
</I>&gt;&gt;<i> Betreff: Re: [Mapnik-users] Problems building Mapnik (build with  
</I>&gt;&gt;<i> python2.6	and scons.py)
</I>&gt;<i>
</I>&gt;&gt;<i> Martin,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Comments inline...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Feb 18, 2009, at 1:03 AM, tschobber tsch&#246;bbi wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi Dane,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> thank you very much for your help - I'll try Mapnik with the latest
</I>&gt;&gt;&gt;<i> version ;) ... Next I'm trying to install Mapnik with WMS and OGC
</I>&gt;&gt;&gt;<i> server and found this documentation
</I>&gt;&gt;<i> <A HREF="http://trac.mapnik.org/wiki/OgcServerSvn">http://trac.mapnik.org/wiki/OgcServerSvn</A>
</I>&gt;&gt;&gt;<i> but I don't know how to proceed. I have several questions:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> - What about this OGC/WMS server? Do I have to install them first?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No, the server is written in python and installs automatically when
</I>&gt;&gt;<i> you Build and install mapnik.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Because I found no ogcserver executable but only a directory named
</I>&gt;&gt;&gt;<i> ogcserver and the ogcserver.conf I just found in the source
</I>&gt;&gt;&gt;<i> directory of the mapnik download.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That is the server, just a python module, not really an 'executable'.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> - Next question concerns this sentences (under &quot;Configuring the
</I>&gt;&gt;&gt;<i> server&quot;): &quot;Edit the path to the interpreter in the first line.&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ya, that is confusing. I think that is no longer relevant. Just make
</I>&gt;&gt;<i> sure you can do:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> $ python
</I>&gt;&gt;<i> Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17)
</I>&gt;&gt;<i> [GCC 4.0.1 (Apple Inc. build 5465)] on darwin
</I>&gt;&gt;<i> Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more  
</I>&gt;&gt;<i> information.
</I>&gt;&gt;&gt;&gt;&gt;<i> from mapnik.ogcserver import *
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> without errors... and the you know the code is working.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Why do I have to edit this path and how should I edit it?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I don't think you need to edit any paths in the code. You just need  
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> set up the server as either CGI, Mod_python, or a WSGI app within
</I>&gt;&gt;<i> Apache.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However, for learning I recommend setting up the server to test
</I>&gt;&gt;<i> OUTSIDE of apache.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To do this adapt the 'localogc.py' program from here:
</I>&gt;&gt;<i> <A HREF="http://mapnik-utils.googlecode.com/svn/example_code/wms/">http://mapnik-utils.googlecode.com/svn/example_code/wms/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That 'localogc/py' script will boot up the server on port 8000 once  
</I>&gt;&gt;<i> it
</I>&gt;&gt;<i> is pointed at the configuration file (and once the map_factory
</I>&gt;&gt;<i> referenced in the confi file on on the python path). The  
</I>&gt;&gt;<i> configuration
</I>&gt;&gt;<i> file must point at a 'map_factory.py' script that either creates you
</I>&gt;&gt;<i> map definitions in python or loads an xml file.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Next you'll need an Openlayers HTML pages to test sending GET  
</I>&gt;&gt;<i> requests
</I>&gt;&gt;<i> to the server at <A HREF="http://localhost:8000?key=param&amp;key=param....">http://localhost:8000?key=param&amp;key=param....</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Dane
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL
</I>&gt;<i> f&#252;r nur 17,95 Euro/mtl.!* <A HREF="http://dsl.gmx.de/?">http://dsl.gmx.de/?</A> 
</I>&gt;<i> ac=OM.AD.PD003K11308T4569a
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Computer Bild Tarifsieger! GMX FreeDSL - Telefonanschluss + DSL
</I>&gt;<i> f&#252;r nur 17,95 &#191;/mtl.!* <A HREF="http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a">http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a</A>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Psssst! Schon vom neuen GMX MultiMessenger geh&#246;rt? Der kann`s mit  
</I>&gt;<i> allen: <A HREF="http://www.gmx.net/de/go/multimessenger01">http://www.gmx.net/de/go/multimessenger01</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001645.html">[Mapnik-users] Missing roads
</A></li>
	<LI>Next message: <A HREF="001648.html">[Mapnik-users]  ogcserver and filter expression in WMS-URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1646">[ date ]</a>
              <a href="thread.html#1646">[ thread ]</a>
              <a href="subject.html#1646">[ subject ]</a>
              <a href="author.html#1646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
