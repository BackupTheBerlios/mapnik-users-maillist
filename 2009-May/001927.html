<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Methods for enhancing the size of PNGs based on	needed quality.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Methods%20for%20enhancing%20the%20size%20of%20PNGs%20based%20on%0A%09needed%20quality.&In-Reply-To=%3C18916b460905090645t76a4d9d0g97aa6a994a0124cd%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001926.html">
   <LINK REL="Next"  HREF="001928.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Methods for enhancing the size of PNGs based on	needed quality.</H1>
    <B>Alireza Kashian</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Methods%20for%20enhancing%20the%20size%20of%20PNGs%20based%20on%0A%09needed%20quality.&In-Reply-To=%3C18916b460905090645t76a4d9d0g97aa6a994a0124cd%40mail.gmail.com%3E"
       TITLE="[Mapnik-users] Methods for enhancing the size of PNGs based on	needed quality.">alireza.kashian at gmail.com
       </A><BR>
    <I>Sat May  9 15:45:49 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001926.html">[Mapnik-users] Mapnik 0.6.0 accepted in Macports
</A></li>
        <LI>Next message: <A HREF="001928.html">[Mapnik-users] Methods for enhancing the size of PNGs based on needed quality.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1927">[ date ]</a>
              <a href="thread.html#1927">[ thread ]</a>
              <a href="subject.html#1927">[ subject ]</a>
              <a href="author.html#1927">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

One of the things I have been always looking for is the method for enhancing
PNG sizes made by mapnik.
Right now, each map tile (250x250px) is by average 90Kbyte (PNG-24bit)  in
city centers..(where we have POIs, roads and other colorful features.).

This file size is not suitable for web mapping. I checked google maps and in
those crowded areas, the size of PNGs are maximm 12Kbyte !!

One way is to use PNG256 in mapnik. But since we use Tilecache for
generating the tiles, Metatile does not support PNG256 and if we turn
metatile off, then the we loose the texts on edges and even speed for making
tiles is much less. our maps are full screen, so 7x4=28 tiles per view.

I even made PNG256 with mapnik alone and still the size is around 25 to
30Kbyte ...!    comparing to gooogle, it is double or more..
I used Photoshop &quot;save for web&quot; feature and chose Web Snap option in save
menue...the result PNG is like 9Kbyte !!!

I used Convert function in ImageMagick and tried to set it for lowest
possible quality and even ImageMagick can't make 9Kbyte PNG...it could make
it like 22Kbyte... I don't know what Photoshop does..is it a hidden
algorithm?

So I am still looking for possible Batch optimization of 600,000 PNGs which
are created by mapnik/tilecache.

We usually update our maps every week and we need to find a solution for
that.

Anyone has experience on methods and tips for enhancing the sizes? it is a
matter of giga bytes of transfer per day.....

thanks.
Alireza
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/mapnik-users/attachments/20090509/fe3b2a1d/attachment.html">https://lists.berlios.de/pipermail/mapnik-users/attachments/20090509/fe3b2a1d/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001926.html">[Mapnik-users] Mapnik 0.6.0 accepted in Macports
</A></li>
	<LI>Next message: <A HREF="001928.html">[Mapnik-users] Methods for enhancing the size of PNGs based on needed quality.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1927">[ date ]</a>
              <a href="thread.html#1927">[ thread ]</a>
              <a href="subject.html#1927">[ subject ]</a>
              <a href="author.html#1927">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
