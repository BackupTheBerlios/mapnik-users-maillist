<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Using an Entity causes odd error on Windows
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Using%20an%20Entity%20causes%20odd%20error%20on%20Windows&In-Reply-To=%3Cd653ac070906051617p648e50e7x49eb225c2eea2bcd%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001996.html">
   <LINK REL="Next"  HREF="001998.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Using an Entity causes odd error on Windows</H1>
    <B>Philip Howarth</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Using%20an%20Entity%20causes%20odd%20error%20on%20Windows&In-Reply-To=%3Cd653ac070906051617p648e50e7x49eb225c2eea2bcd%40mail.gmail.com%3E"
       TITLE="[Mapnik-users] Using an Entity causes odd error on Windows">Philip at Howarth.name
       </A><BR>
    <I>Sat Jun  6 01:17:29 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001996.html">[Mapnik-users] Announcing Quantumnik - Mapfile authoring in Quantum	GIS
</A></li>
        <LI>Next message: <A HREF="001998.html">[Mapnik-users] Using an Entity causes odd error on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1997">[ date ]</a>
              <a href="thread.html#1997">[ thread ]</a>
              <a href="subject.html#1997">[ subject ]</a>
              <a href="author.html#1997">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.   I can't get xml entities in style sheets to work on Windows.

I have Mapnik 0.5.1 installed on an Ubuntu 8.10 machine and  Mapnik 0.6.0 on
a Windows XP machine.
Both work fine and render osm tiles using the standard python scripts.

However... I can use xml entities in my mapfile on the ubuntu machine but
attempting the same thing on the Windows machine results in:

      File &quot;C:\Documents and Settings\Admin\My
Documents\Mapping\mapnik\WIN_entity_generate_tiles.py&quot;, line 53, in
render_tiles
         load_map(m,mapfile)
      UserWarning: Not a map file. Node 'Map' not found.

I used the win32 binary download from:
<A HREF="http://download.berlios.de/mapnik/mapnik-0.6.0-win32-py25.zip">http://download.berlios.de/mapnik/mapnik-0.6.0-win32-py25.zip</A>
and Python reports Python 2.5.2 (r252:60911, Feb 21 2008, 13:11:45

The working mapfile first few lines:
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
    &lt;!DOCTYPE Map&gt;
    &lt;Map bgcolor=&quot;#b5d0d0&quot; srs=&quot;+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
+lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs +over&quot;&gt;
    &lt;Style name=&quot;world&quot;&gt;...etc

The same few lines of the mapfile that *doesn't* work on Windows/mapnik
0.6.0 (but does work on Ubuntu/mapnik 0.5.1)
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
    &lt;!DOCTYPE Map [
    &lt;!ENTITY Water &quot;#d8f8f8&quot;&gt;
    ]&gt;
    &lt;Map bgcolor=&quot;#b5d0d0&quot; srs=&quot;+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
+lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs +over&quot;&gt;
    &lt;Style name=&quot;world&quot;&gt;...etc

The only difference between the two files is the entity. (To help debug the
issue I created the second file from the first and simply pasted in the
entity component.)

I expect I'm doing something stupid! Can anyone tell me what it might be? My
Google searches suggest that this effect is caused when mapnik is not built
with libxml2 (which seems unlikely in the published distribution.)

Thanks,

           Philip
-- 
Philip Howarth
Cambridge UK
email: Philip at Howarth . name
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/mapnik-users/attachments/20090606/0d0ca1e4/attachment.html">https://lists.berlios.de/pipermail/mapnik-users/attachments/20090606/0d0ca1e4/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001996.html">[Mapnik-users] Announcing Quantumnik - Mapfile authoring in Quantum	GIS
</A></li>
	<LI>Next message: <A HREF="001998.html">[Mapnik-users] Using an Entity causes odd error on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1997">[ date ]</a>
              <a href="thread.html#1997">[ thread ]</a>
              <a href="subject.html#1997">[ subject ]</a>
              <a href="author.html#1997">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
