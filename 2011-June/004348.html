<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Perpendicular artifacts along track
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2011-June/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Perpendicular%20artifacts%20along%20track&In-Reply-To=%3C736C1555-87F2-48DA-8AE9-AFCE2FF9FB5B%40dbsgeo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004346.html">
   <LINK REL="Next"  HREF="004349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Perpendicular artifacts along track</H1>
    <B>Dane Springmeyer</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Perpendicular%20artifacts%20along%20track&In-Reply-To=%3C736C1555-87F2-48DA-8AE9-AFCE2FF9FB5B%40dbsgeo.com%3E"
       TITLE="[Mapnik-users] Perpendicular artifacts along track">dane at dbsgeo.com
       </A><BR>
    <I>Mon Jun 27 08:07:17 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004346.html">[Mapnik-users] Perpendicular artifacts along track
</A></li>
        <LI>Next message: <A HREF="004349.html">[Mapnik-users] Perpendicular artifacts along track
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4348">[ date ]</a>
              <a href="thread.html#4348">[ thread ]</a>
              <a href="subject.html#4348">[ subject ]</a>
              <a href="author.html#4348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jun 26, 2011, at 10:48 PM, Magnus B&#228;ck wrote:

&gt;<i> On Monday, June 27, 2011 at 07:13 CEST,
</I>&gt;<i>     Dane Springmeyer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">dane at dbsgeo.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On Jun 26, 2011, at 12:56 PM, Magnus B&#228;ck wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> FWIW, filtering out adjacent points that are &lt;100 m apart made
</I>&gt;&gt;&gt;<i> the map render perfectly with no crossing lines. I didn't need
</I>&gt;&gt;&gt;<i> any better resolution anyway. Still curious to know why I got
</I>&gt;&gt;&gt;<i> the described behavior in the first place though, and to know
</I>&gt;&gt;&gt;<i> if there's any way to avoid it without preprocessing the data.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Magnus,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Just looking at your example &quot;crossed-track.png&quot; now. I don't see any
</I>&gt;&gt;<i> way those could be rendering artifacts, but perhaps I'm overlooking
</I>&gt;&gt;<i> something. Can you post your raw data somewhere so I can take a look?
</I>&gt;<i> 
</I>&gt;<i> Sure, feel free to have a look at
</I>&gt;<i> <A HREF="http://elwood.jpl.se/~magnus/train_beijing_hunan.gpx,">http://elwood.jpl.se/~magnus/train_beijing_hunan.gpx,</A> or
</I>&gt;<i> <A HREF="http://elwood.jpl.se/~magnus/whole-track.png">http://elwood.jpl.se/~magnus/whole-track.png</A> which contains
</I>&gt;<i> a rendering of the whole track rather than just the cropped
</I>&gt;<i> portion found in crossed-track.png.
</I>&gt;<i> 
</I>&gt;<i> So, I converted that GPX file into a shapefile with gpx2shp
</I>&gt;<i> before feeding it to Mapnik. As I didn't see any crossing lines
</I>&gt;<i> when viewing either the GPX file nor the shapefile I've assumed
</I>&gt;<i> it was somehow related to Mapnik. Also, the lines are (in most
</I>&gt;<i> cases) a little bit too perpendicular and of equal length to
</I>&gt;<i> indicate a problem with the data itself.
</I>
Yep, rendering artifact, that I can replicate. Your hunch was right. Not looked closely yet as to the cause, but likely the high density of nodes triggers those sharp spikes in some part of AGG.

The fix, however, is easy, and likely something want you want anyway for smoother a looking line given the high density of node.

Add these two extra options to the LineSymbolizer:

stroke-linejoin=&quot;round&quot; stroke-linecap=&quot;round&quot;

That should fix things up nicely. Though your pre-processing solution is great too of course because things will draw faster that way.

Dane


&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Magnus B&#228;ck
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">baeck at swipnet.se</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004346.html">[Mapnik-users] Perpendicular artifacts along track
</A></li>
	<LI>Next message: <A HREF="004349.html">[Mapnik-users] Perpendicular artifacts along track
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4348">[ date ]</a>
              <a href="thread.html#4348">[ thread ]</a>
              <a href="subject.html#4348">[ subject ]</a>
              <a href="author.html#4348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
