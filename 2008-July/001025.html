<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] manually drawing layers
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20manually%20drawing%20layers&In-Reply-To=%3C5a84eca40807101132r354cffc9oa94385edb03d3146%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001021.html">
   <LINK REL="Next"  HREF="001027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] manually drawing layers</H1>
    <B>Kevin Webb</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20manually%20drawing%20layers&In-Reply-To=%3C5a84eca40807101132r354cffc9oa94385edb03d3146%40mail.gmail.com%3E"
       TITLE="[Mapnik-users] manually drawing layers">kpwebb at gmail.com
       </A><BR>
    <I>Thu Jul 10 20:32:14 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001021.html">[Mapnik-users] manually drawing layers
</A></li>
        <LI>Next message: <A HREF="001027.html">[Mapnik-users] manually drawing layers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1025">[ date ]</a>
              <a href="thread.html#1025">[ thread ]</a>
              <a href="subject.html#1025">[ subject ]</a>
              <a href="author.html#1025">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Artem,

Thanks for the response! I was curious about an approach like using
pyCairo to draw on the image. However, I wasn't clear on how to get
the actual coordinate dimensions for the image such that I could
transform my drawing operations onto the map. Is there a way to do
this in Python after the map is rendered? Or is pyCairo using the
coordinate system from the map?

As for the API, I'm still not sure about how far I'd need to go.
Ideally I'd expose the full range of drawing operations that are
provided by the renderer but that might be overkill. I'll probably
start by just exposing a subset and see if that's any easier.

Also, has there been any discussion about adding support for the new
SQL/MM curve types?


In case you're curious, here's an example of one of the maps I'm
making. This was done with the PostGIS approach - it's still a work in
progress but it did what I needed.

<A HREF="http://www.structuralknowledge.com/maps/flow_map.png">http://www.structuralknowledge.com/maps/flow_map.png</A>

Thanks,
Kevin


On Thu, Jul 10, 2008 at 4:11 AM, Artem Pavlenko &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">artem at mapnik.org</A>&gt; wrote:
&gt;<i> Hi Kevin,
</I>&gt;<i>
</I>&gt;<i> On 9 Jul 2008, at 18:01, Kevin Webb wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm interested to know if anyone has developed an approach with Mapnik
</I>&gt;&gt;<i> to draw layers manually (i.e. using graphics primitives directly)
</I>&gt;&gt;<i> rather than going through the existing symbolizers. My interests is to
</I>&gt;&gt;<i> take a map (via a shapefile, or postgis data source) and overlay
</I>&gt;&gt;<i> structural, in my case non-cartographic/topological, data over top of
</I>&gt;&gt;<i> it using the coordinate space from the map. I've devised a way to do
</I>&gt;&gt;<i> this by inserting my markup into a postgis datasource and then
</I>&gt;&gt;<i> rendering that as a layer. It works but is a bit clunky and doesn't
</I>&gt;&gt;<i> allow for easy programmatic control of the drawing - it also makes
</I>&gt;&gt;<i> certain kinds of drawing operations very challenging. In my case I am
</I>&gt;&gt;<i> drawing arc segments between points with arrowhead caps.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> You can try using something like pycairo to draw on top of map.
</I>&gt;<i>
</I>&gt;&gt;<i> Ideally the next step would be to expose a layer with graphics
</I>&gt;&gt;<i> primitives through the API (in my case Python). I've looked at the
</I>&gt;&gt;<i> source already and don't see anything heading in this direction,
</I>&gt;&gt;<i> however, I'm curious if this is something that people have played
</I>&gt;&gt;<i> with? I'm going to start hacking on the current 0.51 source to see
</I>&gt;&gt;<i> investigate the feasibility of this change but would love any guidance
</I>&gt;&gt;<i> that others may have.
</I>&gt;<i>
</I>&gt;<i> Yes, I can see this can be useful. What kind of API are you envisaging ?
</I>&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> Kevin
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i> Artem
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Mapnik-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001021.html">[Mapnik-users] manually drawing layers
</A></li>
	<LI>Next message: <A HREF="001027.html">[Mapnik-users] manually drawing layers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1025">[ date ]</a>
              <a href="thread.html#1025">[ thread ]</a>
              <a href="subject.html#1025">[ subject ]</a>
              <a href="author.html#1025">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
