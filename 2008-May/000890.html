<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Documentation &amp; reference ?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Documentation%20%26%20reference%20%3F&In-Reply-To=%3Ccdc8b1a60805051241w6a7c9070h9724f38346c7175%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000889.html">
   <LINK REL="Next"  HREF="000891.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Documentation &amp; reference ?</H1>
    <B>Justin Bronn</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Documentation%20%26%20reference%20%3F&In-Reply-To=%3Ccdc8b1a60805051241w6a7c9070h9724f38346c7175%40mail.gmail.com%3E"
       TITLE="[Mapnik-users] Documentation &amp; reference ?">jbronn at gmail.com
       </A><BR>
    <I>Mon May  5 21:41:59 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000889.html">[Mapnik-users] Documentation &amp; reference ?
</A></li>
        <LI>Next message: <A HREF="000891.html">[Mapnik-users] Problem with coastlines, world boundaries (OSM data)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#890">[ date ]</a>
              <a href="thread.html#890">[ thread ]</a>
              <a href="subject.html#890">[ subject ]</a>
              <a href="author.html#890">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Collin,

Check out the way OpenStreetMap generates their tiles for an example:

<A HREF="http://trac.openstreetmap.org/browser/applications/rendering/mapnik/generate_tiles.py">http://trac.openstreetmap.org/browser/applications/rendering/mapnik/generate_tiles.py</A>

-Justin

- Original message -
Wow, thank you Mike. This is quite a bit of info. I am ...



On 5/5/08, Collin Olan &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">collin.olan at frogdesign.com</A>&gt; wrote:
&gt;<i> Wow, thank you Mike. This is quite a bit of info. I am reading over
</I>&gt;<i> the Google explanation of different ways to use and represent
</I>&gt;<i> Coordinates. Also very interesting and useful is the Map Provider
</I>&gt;<i> Tutorial on the Modest Maps site about cutting up a an existing map
</I>&gt;<i> (The Oakland Bus Lines).
</I>&gt;<i>
</I>&gt;<i> I definitely understand the basic concept of generating the tiles.
</I>&gt;<i> Now, from what else I understand, and you have touched upon, one will
</I>&gt;<i> only generate as many tiles as are needed for any particular
</I>&gt;<i> application. For example, if I were making a map of Central Park, I
</I>&gt;<i> would generate tiles only for the park and not include the rest of the
</I>&gt;<i> city and beyond. And in this example, if I were to be allowing for say
</I>&gt;<i> 10 levels of zoom, then I would be generating 10 sets of tiles at
</I>&gt;<i> different resolutions for those zoom levels correct?
</I>&gt;<i>
</I>&gt;<i> Once I get a little further your XML settings for minimum / maximum
</I>&gt;<i> zoom levels will fit into place.
</I>&gt;<i>
</I>&gt;<i> Thank you very much, I'm sure I will have more questions but this is a
</I>&gt;<i> great start.
</I>&gt;<i>
</I>&gt;<i> Collin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On May 5, 2008, at 12:39 PM, Michal Migurski wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hello Collin,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There's kind of a lot buried in your question. I'm also new to Mapnik,
</I>&gt;<i> &gt; but I've had a lot of experience dealing with maps as a consumer for
</I>&gt;<i> &gt; our Modest Maps project. A lot of my current work in tile generation
</I>&gt;<i> &gt; is tuned specifically for consumption by that particular Flash-based
</I>&gt;<i> &gt; library.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Some short answers: generating tiles is just like generating lots of
</I>&gt;<i> &gt; small images, each one covering a small square area of your projected
</I>&gt;<i> &gt; world. Because there are *so many* tiles in an extensive map, it
</I>&gt;<i> &gt; usually makes sense to use a caching layer and generate only those
</I>&gt;<i> &gt; tiles that you need, at whatever zoom level is requested by your user.
</I>&gt;<i> &gt; I'm not sure what books would be available on a topic as green as this
</I>&gt;<i> &gt; one, but I did recently order Krygier's Making Maps out of curiosity
</I>&gt;<i> &gt; (it hasn't shipped yet):
</I>&gt;<i> &gt; 	<A HREF="http://www.amazon.com/gp/product/1593852002">http://www.amazon.com/gp/product/1593852002</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Mapnik has a &quot;render_tile_to_file()&quot; that takes some extra parameters
</I>&gt;<i> &gt; above and beyond &quot;render_to_file&quot; - seems relevant here, but I haven't
</I>&gt;<i> &gt; been able to find a satisfactory explanation for how it works, so I'm
</I>&gt;<i> &gt; ignoring it at the moment.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It helps to understand how a typical slippy map divides the world into
</I>&gt;<i> &gt; x, y, and z coordinates. Google and MS both have short primers here:
</I>&gt;<i> &gt; 	<A HREF="http://msdn.microsoft.com/en-us/library/bb259689.aspx">http://msdn.microsoft.com/en-us/library/bb259689.aspx</A>
</I>&gt;<i> &gt;
</I>&gt;<i> 	<A HREF="http://code.google.com/apis/maps/documentation/overlays.html#Google_Maps_Coordinates">http://code.google.com/apis/maps/documentation/overlays.html#Google_Maps_Coordinates</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Once you start dealing with multiple zoom levels, you'll find that
</I>&gt;<i> &gt; your style rules need minimum and maximum scale denominators, e.g.:
</I>&gt;<i> &gt; 	&lt;MaxScaleDenominator&gt;100000&lt;/MaxScaleDenominator&gt;
</I>&gt;<i> &gt; 	&lt;MinScaleDenominator&gt;50000&lt;/MinScaleDenominator&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Numbers that seem to work for the projection above are:
</I>&gt;<i> &gt; 	Zoom 1, min/max: 200000000 / 500000000
</I>&gt;<i> &gt; 	Zoom 2, min/max: 100000000 / 200000000
</I>&gt;<i> &gt; 	Zoom 3, min/max: 50000000 / 100000000
</I>&gt;<i> &gt; 	Zoom 4, min/max: 25000000 / 50000000
</I>&gt;<i> &gt; 	Zoom 5, min/max: 12500000 / 25000000
</I>&gt;<i> &gt; 	Zoom 6, min/max: 6500000 / 12500000
</I>&gt;<i> &gt; 	Zoom 7, min/max: 3000000 / 6500000
</I>&gt;<i> &gt; 	Zoom 8, min/max: 1500000 / 3000000
</I>&gt;<i> &gt; 	Zoom 9, min/max: 750000 / 1500000
</I>&gt;<i> &gt; 	Zoom 10, min/max: 400000 / 750000
</I>&gt;<i> &gt; 	Zoom 11, min/max: 200000 / 400000
</I>&gt;<i> &gt; 	Zoom 12, min/max: 100000 / 200000
</I>&gt;<i> &gt; 	Zoom 13, min/max: 50000 / 100000
</I>&gt;<i> &gt; 	Zoom 14, min/max: 25000 / 50000
</I>&gt;<i> &gt; 	Zoom 15, min/max: 12500 / 25000
</I>&gt;<i> &gt; 	Zoom 16, min/max: 5000 / 12500
</I>&gt;<i> &gt; 	Zoom 17, min/max: 2500 / 5000
</I>&gt;<i> &gt; 	Zoom 18, min/max: 1000 / 2500
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Paul Smith from Everyblock has an excellent high-level article on ALA
</I>&gt;<i> &gt; that explains how Mapnik fits into a broader system for tile delivery:
</I>&gt;<i> &gt; 	<A HREF="http://www.alistapart.com/articles/takecontrolofyourmaps">http://www.alistapart.com/articles/takecontrolofyourmaps</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; FWIW, the decision to use OpenLayers and TileCache in Paul's write-up
</I>&gt;<i> &gt; is definitely not set in stone. For a project I'm working on
</I>&gt;<i> &gt; currently, I've written some of my own tile-rendering code in Python,
</I>&gt;<i> &gt; and I'm serving up the imagery in a selection of Modest Maps and
</I>&gt;<i> &gt; OpenLayers front ends. For the tile-rendering portion, I've been using
</I>&gt;<i> &gt; a bunch of the helper classes from Modest Maps to handle coordinate
</I>&gt;<i> &gt; systems and projections, specifically the Core.Coordinate class and
</I>&gt;<i> &gt; Microsoft projection:
</I>&gt;<i> &gt; 	<A HREF="http://modestmaps.mapstraction.com/trac/browser/trunk/py/ModestMaps">http://modestmaps.mapstraction.com/trac/browser/trunk/py/ModestMaps</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; OpenLayers in particular takes a bit of wrangling to act like the
</I>&gt;<i> &gt; Mercator projection used by Google, Yahoo, Microsoft, and others. This
</I>&gt;<i> &gt; projection looks like it's fast becoming a de facto standard for
</I>&gt;<i> &gt; general web cartography. One way to get your OpenLayers map to behave
</I>&gt;<i> &gt; properly is to feed these args to its constructor in a dictionary:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;         maxExtent: new OpenLayers.Bounds(-20037508.3427892,
</I>&gt;<i> &gt; -20037508.3427892, 20037508.3427892, 20037508.3427892),
</I>&gt;<i> &gt;         numZoomLevels: 18,
</I>&gt;<i> &gt;         maxResolution: 156543.0339,
</I>&gt;<i> &gt;         units: 'm',
</I>&gt;<i> &gt;         displayProjection:  new OpenLayers.Projection('EPSG:4326'),
</I>&gt;<i> &gt;         projection: 'EPSG:900913',
</I>&gt;<i> &gt; Something I'm handling at the moment is the need to overshoot your
</I>&gt;<i> &gt; tile boundaries a bit when rendering, and ways to make that less of a
</I>&gt;<i> &gt; hit. The general idea here is that if you have derived features that
</I>&gt;<i> &gt; cross a tile boundary (for example, a really fat road whose centerline
</I>&gt;<i> &gt; is on one tile, but whose width extends onto a second tile), you want
</I>&gt;<i> &gt; to add some padding to your tiles to account for such features before
</I>&gt;<i> &gt; cutting them back, otherwise the road will never show up on the second
</I>&gt;<i> &gt; tile and your map will look wrong. OpenStreetMap renders their tiles
</I>&gt;<i> &gt; in swaths of 8x8 with a 128 pixel padding to make this less of a
</I>&gt;<i> &gt; performance hit, for example.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I hope this braindump is helpful, I'm elbows-deep in all of this right
</I>&gt;<i> &gt; now, and when I come up for air in a week or two I'll try to write all
</I>&gt;<i> &gt; of this up in an article of some kind. Paul and Dominic on this list
</I>&gt;<i> &gt; have been wildly helpful with installation &amp; technical assistance.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -mike.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On May 5, 2008, at 7:10 AM, Collin wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Hello,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I am completely new to this stuff so please bear with me. I am just
</I>&gt;<i> &gt;&gt; teaching myself Python and Django and don't have a background in
</I>&gt;<i> &gt;&gt; programming really (I can find my way around in Javascript and spent
</I>&gt;<i> &gt;&gt; a lot of time doing Max/MSP stuff so i am not completely ignorant
</I>&gt;<i> &gt;&gt; either).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; It took me a week but I was able to get Mapnik installed properly on
</I>&gt;<i> &gt;&gt; OS X Leopard.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I have now gone through the two short tutorials on the Mapnik Wiki
</I>&gt;<i> &gt;&gt; and am able to generate a .png of the world and alter the colors,
</I>&gt;<i> &gt;&gt; one while setting those parameters in an XML file.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Now what? How does one generate tiles rather than one image? And for
</I>&gt;<i> &gt;&gt; that matter, is the idea to generate a set of tiles for each zoom
</I>&gt;<i> &gt;&gt; level you plan to support? Maybe I am missing some common knowledge
</I>&gt;<i> &gt;&gt; about this and if so I apologize, and ask if someone could please
</I>&gt;<i> &gt;&gt; point me to resources on this. Where does a beginner start?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Are there any books this list could recommend on web cartography? I
</I>&gt;<i> &gt;&gt; just ordered this one, which seemed pretty good:
</I>&gt;<i> &gt;&gt; <A HREF="http://tinyurl.com/6m5y3b">http://tinyurl.com/6m5y3b</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ----------------------------------------------------------------
</I>&gt;<i> &gt; michal migurski- <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">mike at stamen.com</A>
</I>&gt;<i> &gt;                  415.558.1610
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Mapnik-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>
-- 
Sent from Gmail for mobile | mobile.google.com

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000889.html">[Mapnik-users] Documentation &amp; reference ?
</A></li>
	<LI>Next message: <A HREF="000891.html">[Mapnik-users] Problem with coastlines, world boundaries (OSM data)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#890">[ date ]</a>
              <a href="thread.html#890">[ thread ]</a>
              <a href="subject.html#890">[ subject ]</a>
              <a href="author.html#890">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
