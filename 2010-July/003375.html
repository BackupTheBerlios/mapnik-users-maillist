<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Problems rendering osm file
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Problems%20rendering%20osm%20file&In-Reply-To=%3CFB7AB45E-8DB9-4414-A6C0-BA1BF9118DEB%40dbsgeo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003366.html">
   <LINK REL="Next"  HREF="003367.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Problems rendering osm file</H1>
    <B>Dane Springmeyer</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Problems%20rendering%20osm%20file&In-Reply-To=%3CFB7AB45E-8DB9-4414-A6C0-BA1BF9118DEB%40dbsgeo.com%3E"
       TITLE="[Mapnik-users] Problems rendering osm file">dane at dbsgeo.com
       </A><BR>
    <I>Sat Jul 10 01:24:37 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003366.html">[Mapnik-users] Problems rendering osm file
</A></li>
        <LI>Next message: <A HREF="003367.html">[Mapnik-users] mapnik performance for on-demand tile generation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3375">[ date ]</a>
              <a href="thread.html#3375">[ thread ]</a>
              <a href="subject.html#3375">[ subject ]</a>
              <a href="author.html#3375">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 7, 2010, at 6:50 PM, Thomas Walter wrote:

&gt;<i> I got it working. It seems that a library in the standard ubuntu installation 
</I>&gt;<i> (maybe libcairo2) caused the problem. After adding the xorg-edgers ppa and 
</I>&gt;<i> updating the system,  it now works as supposed. 
</I>&gt;<i> 
</I>
You mean labels now don't collide? That is a bit baffling, but great to hear it is working, and that for reporting back.

I had no idea you were rendering using the cairo backend (or maybe you are not?). In the future if you can provide the whole code snippet rather than just a small snippet then that might help (using <A HREF="http://dpaste.com">http://dpaste.com</A> or some other paste works for larger files).

- dane

&gt;<i> Anyway, thanks for the help.
</I>&gt;<i> 
</I>&gt;<i> Tom
</I>&gt;<i> 
</I>&gt;<i> Am Sonntag 04 Juli 2010, 08:18:18 schrieben Sie:
</I>&gt;&gt;<i> nik2img by default zooms to the full extent of the data, not sure what the
</I>&gt;&gt;<i> viewer does. How are you getting that image out of the viewer?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Dane
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Jul 3, 2010, at 10:50 AM, Thomas Walter wrote:
</I>&gt;&gt;&gt;<i> Hi Dane
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Ok after some playing around I could get it working as well - it was
</I>&gt;&gt;&gt;<i> again the QMAKE_CXXFLAGS +=' -ansi'
</I>&gt;&gt;&gt;<i> that was missing. Don't know why it did not work on my first attempt.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Anyway - the viewer now shows the same output like my program:
</I>&gt;&gt;&gt;<i> <A HREF="http://img12.imageshack.us/img12/4949/viewertest.jpg">http://img12.imageshack.us/img12/4949/viewertest.jpg</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> With nik2img it works perfectly:
</I>&gt;&gt;&gt;<i> <A HREF="http://img813.imageshack.us/img813/2969/test2.png">http://img813.imageshack.us/img813/2969/test2.png</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> nik2img.py test2.xml test2.png -v
</I>&gt;&gt;&gt;<i> Step: 1 // --&gt; Nik2img starting...
</I>&gt;&gt;&gt;<i> Step: 2 // --&gt; Format: png
</I>&gt;&gt;&gt;<i> Step: 3 // --&gt; Loading mapfile...
</I>&gt;&gt;&gt;<i> Step: 4 // --&gt; Loaded test2.xml...
</I>&gt;&gt;&gt;<i> ### WARNING: Failed to load image file '/home/nick/images/pub.png':
</I>&gt;&gt;&gt;<i> cannot open image file /home/nick/images/pub.png
</I>&gt;&gt;&gt;<i> ### WARNING: Failed to load image file '/home/nick/images/mast.png':
</I>&gt;&gt;&gt;<i> cannot open image file /home/nick/images/mast.png
</I>&gt;&gt;&gt;<i> ### WARNING: Failed to load image file '/home/nick/images/carpark.png':
</I>&gt;&gt;&gt;<i> cannot open image file /home/nick/images/carpark.png
</I>&gt;&gt;&gt;<i> ### WARNING: Failed to load image file '/home/nick/images/farm.png':
</I>&gt;&gt;&gt;<i> cannot open image file /home/nick/images/farm.png
</I>&gt;&gt;&gt;<i> Step: 5 // --&gt; Setting Map view...
</I>&gt;&gt;&gt;<i> Step: 6 // --&gt; Zoom to extent of all layers:
</I>&gt;&gt;&gt;<i> &quot;Envelope(-1.5749997,50.7998221333,-1.2170842,51.0384324667)&quot;
</I>&gt;&gt;&gt;<i> Step: 7 // --&gt; Finished setting extents...
</I>&gt;&gt;&gt;<i> Loading map took...  0.7305 seconds
</I>&gt;&gt;&gt;<i> Step: 8 // --&gt; SRS: +proj=latlong +datum=WGS84
</I>&gt;&gt;&gt;<i> Step: 9 // --&gt; Map extent:
</I>&gt;&gt;&gt;<i> Envelope(-1.5749997,50.7998221333,-1.2170842,51.0384324667)
</I>&gt;&gt;&gt;<i> Step: 10 // --&gt; Map long/lat bbox:
</I>&gt;&gt;&gt;<i> Envelope(-1.5749997,50.7998221333,-1.2170842,51.0384324667)
</I>&gt;&gt;&gt;<i> Step: 11 // --&gt; Map center: Coord(-1.39604195,50.9191273)
</I>&gt;&gt;&gt;<i> Step: 12 // --&gt; Map long/lat center: Coord(-1.39604195,50.9191273)
</I>&gt;&gt;&gt;<i> Step: 13 // --&gt; Map scale denominator: 237160.542899
</I>&gt;&gt;&gt;<i> Step: 14 // --&gt; Extent of all layers:
</I>&gt;&gt;&gt;<i> Envelope(-1.5749997,50.8159089,-1.2170842,51.0223457)
</I>&gt;&gt;&gt;<i> Step: 15 // --&gt; Long/lat extent of all layers:
</I>&gt;&gt;&gt;<i> Envelope(-1.5749997,50.8159089,-1.2170842,51.0223457)
</I>&gt;&gt;&gt;<i> Step: 16 // --&gt; Long/lat center of all layers:
</I>&gt;&gt;&gt;<i> Coord(-1.39604195,50.9191273) Step: 17 // --&gt; Layers intersecting map:
</I>&gt;&gt;&gt;<i> [leisure, waterway, lakes, roads, amenity, roadstext, text]
</I>&gt;&gt;&gt;<i> Step: 18 // --&gt; At current scale of '0.000596525833333'...
</I>&gt;&gt;&gt;<i> Step: 19 // --&gt; layer 'leisure' is visible
</I>&gt;&gt;&gt;<i> Step: 20 // --&gt; layer 'waterway' is visible
</I>&gt;&gt;&gt;<i> Step: 21 // --&gt; layer 'lakes' is visible
</I>&gt;&gt;&gt;<i> Step: 22 // --&gt; layer 'roads' is visible
</I>&gt;&gt;&gt;<i> Step: 23 // --&gt; layer 'amenity' is visible
</I>&gt;&gt;&gt;<i> Step: 24 // --&gt; layer 'roadstext' is visible
</I>&gt;&gt;&gt;<i> Step: 25 // --&gt; layer 'text' is visible
</I>&gt;&gt;&gt;<i> Step: 26 // --&gt; Starting rendering...
</I>&gt;&gt;&gt;<i> Rendering image took...  1.394 seconds
</I>&gt;&gt;&gt;<i> Step: 27 // --&gt; Finished rendering map to... test2.png
</I>&gt;&gt;&gt;<i> Total Nik2img run time: 2.1802 seconds
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Cheers, Tom
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Am Donnerstag 01 Juli 2010, 23:33:20 schrieben Sie:
</I>&gt;&gt;&gt;&gt;<i> Thomas,
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Can you try again with those flags? The only time we've seen this boost
</I>&gt;&gt;&gt;&gt;<i> assertion so far is when these flags are missing...
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Another thing to try is a older version of g++. I know that we only saw
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://trac.mapnik.org/ticket/436">http://trac.mapnik.org/ticket/436</A> on more recent linux versions with g++
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> = 4. If it works with an earlier version of g++ that might help gives
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> clues.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Dane
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> On Jul 1, 2010, at 6:01 AM, Thomas Walter wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i> Ok after some more testing I'm stuck again. My own project now does not
</I>&gt;&gt;&gt;&gt;&gt;<i> crash anymore when loading the map and having a parameter object. All I
</I>&gt;&gt;&gt;&gt;&gt;<i> need in the project file are those lines:
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> QMAKE_CXXFLAGS +=' -ansi'
</I>&gt;&gt;&gt;&gt;&gt;<i> LIBS += -lmapnik
</I>&gt;&gt;&gt;&gt;&gt;<i> INCLUDEPATH += /usr/include/freetype2/
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> BUT: the rendering problem still exists.
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> And even more, the &quot;viewer&quot; test program still keeps on crashing when I
</I>&gt;&gt;&gt;&gt;&gt;<i> load a map. The debug output looks the same as in my program. I gave it
</I>&gt;&gt;&gt;&gt;&gt;<i> all the additional CFLAGS with no change.
</I>&gt;&gt;&gt;&gt;&gt;<i> Here is the compile output:
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> g++ -c -pipe -ansi -Wall -ftemplate-depth-100 -DLINUX -
</I>&gt;&gt;&gt;&gt;&gt;<i> DBOOST_SPIRIT_THREADSAFE -DMAPNIK_THREADSAFE -O2 -finline-functions
</I>&gt;&gt;&gt;&gt;&gt;<i> -Wno-inline -DNDEBUG -Wno-missing-field-initializers -g -D_REENTRANT
</I>&gt;&gt;&gt;&gt;&gt;<i> -Wall -W -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED
</I>&gt;&gt;&gt;&gt;&gt;<i> -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore
</I>&gt;&gt;&gt;&gt;&gt;<i> -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. -I/usr/include
</I>&gt;&gt;&gt;&gt;&gt;<i> -I/usr/include/freetype2 -Idebug -I. -o debug/main.o main.cpp
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> It opens the xml file (and even complains for the example file about
</I>&gt;&gt;&gt;&gt;&gt;<i> some missing pictures) but then issues all the  these errors. Any
</I>&gt;&gt;&gt;&gt;&gt;<i> ideas about this?
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> Cheers, Tom
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> Am Montag 28 Juni 2010, 22:31:47 schrieben Sie:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> The below error is resulting from missing CFLAGS that you need to pass
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> when compiling your own application against mapnik.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> See
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://www.mail-archive.com/mapnik-users@lists.berlios.de/msg02197.htm">http://www.mail-archive.com/mapnik-users@lists.berlios.de/msg02197.htm</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> l
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> It would be great if you would test which of these make a different
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> and create a wiki page on your findings.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Dane
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> On Jun 28, 2010, at 3:38 AM, Thomas Walter wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Btw - the programm crashes during loading the map as soon as I have
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> declared a parameters object. It does not matter if I use this
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> parameters object or not.
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> datasource_cache::instance()-&gt;register_datasources
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>         (&quot;/usr/lib/mapnik/0.7/input/&quot;);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> freetype_engine::register_font
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>         (&quot;/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans.ttf&quot;);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Map map (tdim,tdim);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> load_map(map,&quot;/home/tom/Desktop/test2.xml&quot;);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> parameters p;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> for(int count=0; count&lt;map.layerCount(); count++)
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> {
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>     qDebug() &lt;&lt; &quot;layer name = &quot; &lt;&lt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>     map.getLayer(count).name().c_str();
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> The error message:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> REV_HMI: /usr/include/boost/variant/detail/visitation_impl.hpp:203:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> typename Visitor::result_type
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::visitation_impl(int, int, Visitor&amp;, VPCV,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> mpl_::true_, NBF, W*, S*) [with W =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::visitation_impl(int, int, Visitor&amp;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> VoidPtrCV, mpl_::false_, NoBackupFlag, Which*, step0*) [with Which =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::variant&lt;T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T13, T14, T15, T16, T17, T18, T19&gt;::internal_apply_visitor_impl(int,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> int, Visitor&amp;, VoidPtrCV) [with Visitor =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::copy_into, VoidPtrCV = const void*, T0_ =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> int, T1 = double, T2 = std::basic_string&lt;char,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, T3 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T4 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T5 = boost::detail::variant::void_, T6 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T7 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T8 = boost::detail::variant::void_, T9 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T10 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T11 = boost::detail::variant::void_, T12 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T13 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T14 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T15 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T16 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T17 = boost::detail::variant::void_, T18 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T19 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_]::first_which, step0 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::variant&lt;T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T12, T13, T14, T15, T16, T17, T18,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T19&gt;::internal_apply_visitor_impl(int, int, Visitor&amp;, VoidPtrCV)
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> [with Visitor = boost::detail::variant::copy_into, VoidPtrCV = const
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> void*, T0_ = int, T1 = double, T2 = std::basic_string&lt;char,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> std::char_traits&lt;char&gt;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> std::allocator&lt;char&gt; &gt;, T3 = boost::detail::variant::void_, T4 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T5 = boost::detail::variant::void_, T6
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> = boost::detail::variant::void_, T7 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T8 = boost::detail::variant::void_, T9 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T10 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T11 = boost::detail::variant::void_, T12 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T13 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T14 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T15 = boost::detail::variant::void_, T16 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T17 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T18 = boost::detail::variant::void_, T19 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_]::first_step, Visitor =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::copy_into, VoidPtrCV = const void*,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> NoBackupFlag = boost::variant&lt;int, double, std::basic_string&lt;char,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_&gt;::has_fallback_type_]::next_which, S =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::visitation_impl(int, int, Visitor&amp;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> VoidPtrCV, mpl_::false_, NoBackupFlag, Which*, step0*) [with Which =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::variant&lt;T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T13, T14, T15, T16, T17, T18, T19&gt;::internal_apply_visitor_impl(int,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> int, Visitor&amp;, VoidPtrCV) [with Visitor =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::copy_into, VoidPtrCV = const void*, T0_ =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> int, T1 = double, T2 = std::basic_string&lt;char,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, T3 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T4 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T5 = boost::detail::variant::void_, T6 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T7 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T8 = boost::detail::variant::void_, T9 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T10 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T11 = boost::detail::variant::void_, T12 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T13 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T14 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T15 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T16 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T17 = boost::detail::variant::void_, T18 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T19 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_]::first_which, step0 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::variant&lt;T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T12, T13, T14, T15, T16, T17, T18,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T19&gt;::internal_apply_visitor_impl(int, int, Visitor&amp;, VoidPtrCV)
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> [with Visitor = boost::detail::variant::copy_into, VoidPtrCV = const
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> void*, T0_ = int, T1 = double, T2 = std::basic_string&lt;char,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> std::char_traits&lt;char&gt;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> std::allocator&lt;char&gt; &gt;, T3 = boost::detail::variant::void_, T4 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T5 = boost::detail::variant::void_, T6
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> = boost::detail::variant::void_, T7 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T8 = boost::detail::variant::void_, T9 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T10 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T11 = boost::detail::variant::void_, T12 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T13 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T14 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T15 = boost::detail::variant::void_, T16 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, T17 = boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> T18 = boost::detail::variant::void_, T19 =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_]::first_step, Visitor =
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::copy_into, VoidPtrCV = const void*,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> NoBackupFlag = boost::variant&lt;int, double, std::basic_string&lt;char,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_&gt;::has_fallback_type_]::next_step,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Visitor = boost::detail::variant::copy_into, VPCV = const void*, NBF
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> = boost::variant&lt;int, double, std::basic_string&lt;char,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_, boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_,
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> boost::detail::variant::void_&gt;::has_fallback_type_]: Assertion
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> `false' failed.
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> And the debugging points to this: &quot;BOOST_ASSERT(false);&quot;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> /////////////////////////////////////////////////////////////////////
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> // // ////// // (detail) function template visitation_impl
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> //
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> // Invokes the given visitor on the type in the given variant
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> storage. //
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> template &lt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>   typename W, typename S
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> , typename Visitor, typename VPCV
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> , typename NBF
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> inline
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> BOOST_VARIANT_AUX_GENERIC_RESULT_TYPE(typename Visitor::result_type)
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> visitation_impl(
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>   int, int, Visitor&amp;, VPCV
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> , mpl::true_ // is_apply_visitor_unrolled
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> , NBF, W* = 0, S* = 0
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> )
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> {
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> // should never be here at runtime:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> BOOST_ASSERT(false);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> typedef typename Visitor::result_type result_type;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> return ::boost::detail::variant::forced_return&lt; result_type &gt;();
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Any idea what's happening here?
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Cheers, Tom
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Am Montag 28 Juni 2010, um 15:44:05 schrieb Thomas Walter:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Hi Dane
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> The rendering with nik2img seems to work correctly:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> $ nik2img.py test2.xml test2.png
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> generates this image:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://img251.imageshack.us/img251/470/test2sz.png">http://img251.imageshack.us/img251/470/test2sz.png</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> The interesting thing is that with my program I get some of the
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> street names in the map so it seems to load the osm file and to
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> read it. And in fact it also takes about 2 seconds to render it
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> (256x256 pixels on an dual core pentium 2Ghz).
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> So imho the problem is neither the xml file nor the osm file nor the
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> mapnik installation. But maybe I did not select the correct
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> envelope?
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Currently I am using this:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 	map.zoom_all();
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> When selecting another envelope like this
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>     Envelope&lt;double&gt; bbox(50.9,-1.45,51.0,-1.35);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>     map.zoomToBox(bbox);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> it renders only the background.  Btw, the coordinates are taken from
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> the osm file:   &lt;bound box='50.9,-1.45,51.0,-1.35'
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> origin='<A HREF="http://www.openstreetmap.org/api/0.5">http://www.openstreetmap.org/api/0.5</A>' /&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Could this be the problem? If it is, how can I select the correct
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> bbox?
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Cheers, Tom
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Am Montag 28 Juni 2010, um 10:18:34 schrieb Dane Springmeyer:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Thomas. Hard to say what is wrong. I'm traveling so I cannot
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> currently dig up that osm plugin example map.   Can you render the
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> map using nik2img and compare the results?
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Dane
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> --- \o/ ---
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Sent from my phone
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> On Jun 25, 2010, at 12:24 PM, Thomas Walter
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">tom0485 at googlemail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Hi there
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> I am trying to generate map tiles out of an osm-file, but for some
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> reason
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> mapnik has problems with the rendering. Often it generates only
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> the background
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> and if it renders more then it is only some random stuff.
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> When I try to render the test2.xml from
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://trac.mapnik.org/browser/trunk/plugins/input/osm">http://trac.mapnik.org/browser/trunk/plugins/input/osm</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> it generates this tile:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://img145.imageshack.us/img145/8569/mapnikerror.png">http://img145.imageshack.us/img145/8569/mapnikerror.png</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> I am using mapnik 0.7.0 from the ubuntu repositories.
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> The relevant source code (mainly taken from the examples) is:
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> datasource_cache::instance()-&gt;register_datasources
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>        (&quot;/usr/lib/mapnik/0.7/input/&quot;);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> freetype_engine::register_font
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>        (&quot;/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans.ttf&quot;);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Map map (tdim,tdim);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> load_map(map,&quot;/home/tom/Desktop/test2.xml&quot;);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> map.zoom_all();
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Image32 buf(map.getWidth(), map.getHeight());
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> agg_renderer&lt;Image32&gt; ren(map,buf);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> ren.apply();
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> QImage image((uchar*)buf.raw_data(),map.getWidth(),
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    map.getHeight(),QImage::Format_ARGB32);
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Cheers
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Tom
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Mapnik-users mailing list
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> Mapnik-users mailing list
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> Mapnik-users mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003366.html">[Mapnik-users] Problems rendering osm file
</A></li>
	<LI>Next message: <A HREF="003367.html">[Mapnik-users] mapnik performance for on-demand tile generation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3375">[ date ]</a>
              <a href="thread.html#3375">[ thread ]</a>
              <a href="subject.html#3375">[ subject ]</a>
              <a href="author.html#3375">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
