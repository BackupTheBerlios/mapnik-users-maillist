<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Setting TextSymbolizer attributes from data	fields
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2011-August/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Setting%20TextSymbolizer%20attributes%20from%20data%0A%09fields&In-Reply-To=%3C002201cc5292%24b2c94720%24185bd560%24%40a3uk.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004474.html">
   <LINK REL="Next"  HREF="004483.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Setting TextSymbolizer attributes from data	fields</H1>
    <B>Alastair Aitchison</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Setting%20TextSymbolizer%20attributes%20from%20data%0A%09fields&In-Reply-To=%3C002201cc5292%24b2c94720%24185bd560%24%40a3uk.com%3E"
       TITLE="[Mapnik-users] Setting TextSymbolizer attributes from data	fields">alastair at a3uk.com
       </A><BR>
    <I>Thu Aug  4 12:38:47 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004474.html">[Mapnik-users] Setting TextSymbolizer attributes from data	fields
</A></li>
        <LI>Next message: <A HREF="004483.html">[Mapnik-users] Inserting layers from Python code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4479">[ date ]</a>
              <a href="thread.html#4479">[ thread ]</a>
              <a href="subject.html#4479">[ subject ]</a>
              <a href="author.html#4479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks very much for the response, Dane

Scripting the rules to be created automatically based on the values in the
data sounds like a good idea - the resulting style rules will still be
pretty bloated, but it's certainly better than having to hard-code each
combination into the XML ;)

Thanks

a.

-----Original Message-----
From: Dane Springmeyer [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">dane at dbsgeo.com</A>] 
Sent: 04 August 2011 12:21 AM
To: Alastair Aitchison
Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">mapnik-users at lists.berlios.de</A>
Subject: Re: [Mapnik-users] Setting TextSymbolizer attributes from data
fields

Hi Alastair,

I see we missed responding to this question earlier and you have another one
you just sent (which is just fine). Anyway, I'll respond to both, in
order...

See below inline...

On Jul 16, 2011, at 10:38 AM, Alastair Aitchison wrote:

&gt;<i> Hi,
</I>&gt;<i>  
</I>&gt;<i> I have a shapefile containing details of all text labels to appear on the
</I>map. Each text element in the shapefile contains attributes including
FONTHEIGHT, FONTCOLOUR, and FONTTYPE, which I'd like to map to the &quot;size&quot;,
&quot;fill&quot;, and &quot;face_name&quot; properties of the TextSymbolizer applied to this
layer, but I seem to be unable to do so.

Right, Mapnik does not currently support reading from features to control
symbolizers with the exception of Text labels and for constructing paths to
image symbols.

&gt;<i> In other words, I'd like to use syntax such as this in my styles.xml file:
</I>&gt;<i>  
</I>&gt;<i> &lt;Style name=&quot;text&quot;&gt;
</I>&gt;<i>     &lt;Rule&gt;
</I>&gt;<i>       &lt;TextSymbolizer
</I>&gt;<i>           name=&quot;NAME&quot;
</I>&gt;<i>           face_name=&quot;FONTTYPE&quot;
</I>&gt;<i>           size=&quot;FONTHEIGHT&quot;
</I>&gt;<i>           fill=&quot;FONTCOLOUR&quot;
</I>&gt;<i>           /&gt;
</I>&gt;<i>     &lt;/Rule&gt;
</I>&gt;<i> &lt;/Style&gt;
</I>&gt;<i>  
</I>&gt;<i> However, it seems that the only property from the TextSymbolizer that can
</I>be (and indeed *has* to be) mapped to a field from the data layer is the
&quot;name&quot; field.

Yes.

&gt;<i> How do I set values for the other properties based on attributes in the
</I>data? (The only way I've been successful so far is to create a ton of
&lt;Rule&gt;s to filter for each combination of type/size/colour, but there's got
to be a better way!)

Not yet, but you are welcome to file a ticket for this at trac.mapnik.org.
In the meantime it sounds like scripting the &lt;Rules&gt; based on querying your
data might be easiest.

&gt;<i>  
</I>&gt;<i> Thanks for any advice!
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mapnik-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>
-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1390 / Virus Database: 1518/3807 - Release Date: 08/03/11


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004474.html">[Mapnik-users] Setting TextSymbolizer attributes from data	fields
</A></li>
	<LI>Next message: <A HREF="004483.html">[Mapnik-users] Inserting layers from Python code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4479">[ date ]</a>
              <a href="thread.html#4479">[ thread ]</a>
              <a href="subject.html#4479">[ subject ]</a>
              <a href="author.html#4479">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
