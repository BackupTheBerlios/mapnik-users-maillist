<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] Mapnik's Python bindings performance
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Mapnik%27s%20Python%20bindings%20performance&In-Reply-To=%3C547b5ba00908180641n4900b2cah4983710532af254c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002208.html">
   <LINK REL="Next"  HREF="002206.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] Mapnik's Python bindings performance</H1>
    <B>Andrii V. Mishkovskyi</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20Mapnik%27s%20Python%20bindings%20performance&In-Reply-To=%3C547b5ba00908180641n4900b2cah4983710532af254c%40mail.gmail.com%3E"
       TITLE="[Mapnik-users] Mapnik's Python bindings performance">amishkovskiy at cloudmade.com
       </A><BR>
    <I>Tue Aug 18 15:41:05 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002208.html">[Mapnik-users]  Commission work
</A></li>
        <LI>Next message: <A HREF="002206.html">[Mapnik-users] Mapnik's Python bindings performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2205">[ date ]</a>
              <a href="thread.html#2205">[ thread ]</a>
              <a href="subject.html#2205">[ subject ]</a>
              <a href="author.html#2205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, fellow mapnik users and/or developers.

Recently I've stumbled upon strange performance issues when using
Python bindings. After investigating a little I've came to a
conclusion that rendering map from Python bindings is (at least) twice
as slow as using C++ to do the same job. To check my assumptions, I've
created simple test, which renders 250 images of size 768x768.
Coordinates are being shifted by 0.01 degree for each image, so I'm
going from somewhere near north France shore to somewhere near
Cambridge. Aaanyway, just look in the source code, the idea is pretty
simple -- <A HREF="http://bitbucket.org/mishok13/mapnik-perf-testing/src/">http://bitbucket.org/mishok13/mapnik-perf-testing/src/</A>
C++ code was compiled using following command:
g++ -Wall -O2 -I/usr/include/freetype2 -I/usr/include/mapnik -lagg_pic
-lmapnik render.cpp -o render 2&gt;&amp;1

So, the timings for these:
C++ render:
$ time ./render

real    0m19.766s
user    0m5.196s
sys     0m0.636s

Python render:
$ time ./render.py

real    0m52.883s
user    0m22.445s
sys     0m0.844s

As you can see, results are not really satisfying. I'm still resisting
to just simply use C++, as writing non-library C++ code hurts my
feelings badly, so if anyone has any clues -- don't hesitate to share
them with me. :)
You could also run the tests on your computer and share the results.

Some information about PC I've used for these tests:
Latest Mapnik trunk checkout (revision 1288)
Boost version 1.37
PostGIS version 1.3.3
Python 2.6
Latest UK extract from CloudMade (obviously :) )
All of this running on Ubuntu 9.04.

-- 
Wbr, Andrii V. Mishkovskyi.

I have the last page code of rocket launch program in NASA written in Lisp:
)))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002208.html">[Mapnik-users]  Commission work
</A></li>
	<LI>Next message: <A HREF="002206.html">[Mapnik-users] Mapnik's Python bindings performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2205">[ date ]</a>
              <a href="thread.html#2205">[ thread ]</a>
              <a href="subject.html#2205">[ subject ]</a>
              <a href="author.html#2205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
