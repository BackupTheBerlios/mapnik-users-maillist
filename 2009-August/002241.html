<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mapnik-users] NIk2img text fill issue
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mapnik-users/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20NIk2img%20text%20fill%20issue&In-Reply-To=%3C3c820d040908271017ubed859ax3372aa577573c124%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002239.html">
   <LINK REL="Next"  HREF="002242.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mapnik-users] NIk2img text fill issue</H1>
    <B>Jamie Robertson</B> 
    <A HREF="mailto:mapnik-users%40lists.berlios.de?Subject=Re%3A%20%5BMapnik-users%5D%20NIk2img%20text%20fill%20issue&In-Reply-To=%3C3c820d040908271017ubed859ax3372aa577573c124%40mail.gmail.com%3E"
       TITLE="[Mapnik-users] NIk2img text fill issue">jamie at backcountryporch.com
       </A><BR>
    <I>Thu Aug 27 19:17:45 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002239.html">[Mapnik-users] NIk2img text fill issue
</A></li>
        <LI>Next message: <A HREF="002242.html">[Mapnik-users] NIk2img text fill issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2241">[ date ]</a>
              <a href="thread.html#2241">[ thread ]</a>
              <a href="subject.html#2241">[ subject ]</a>
              <a href="author.html#2241">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good thought- There are some workarounds to getting an svg created with
nik2img into Ilustrator with the text rendered correctly.  open the svg with
inkscape then save as .eps (Encapsulated Postscript) or .ps (Postscrpit via
Cairo) and then import to Illustrator.

exporting as an .ai from inkscape fails (corrupt file) when importing to
Illustrator

On Thu, Aug 27, 2009 at 10:39 AM, Dane Springmeyer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">blake at hailmail.net</A>&gt;wrote:

&gt;<i> Interesting Matt. I bet that Cairo/Librsvg are being used in Inkscape as
</I>&gt;<i> well.
</I>&gt;<i>
</I>&gt;<i> I wonder if the PostScript or PDF output from Cairo might work better with
</I>&gt;<i> Illustrator?
</I>&gt;<i>
</I>&gt;<i> dane
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Aug 27, 2009, at 9:27 AM, Matt Bartolome wrote:
</I>&gt;<i>
</I>&gt;<i>  I've done some SVG rendering directly with cairo and it never worked
</I>&gt;&gt;<i> right for me when viewed in Illustrator. Same thing as you describe,
</I>&gt;&gt;<i> huge text and scaling issues. Switched to Inkscape and it looks
</I>&gt;&gt;<i> perfect.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Thu, Aug 27, 2009 at 9:11 AM, Jamie
</I>&gt;&gt;<i> Robertson&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">jamie at backcountryporch.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Dane-  the svg output renders fine in firefox, inkscape, or as a pdf.  I
</I>&gt;&gt;&gt;<i> should have checked those first..  So, it's definitely a font issue in
</I>&gt;&gt;&gt;<i> Illustrator.  The weird thing is that even when i copy all of the DejaVu
</I>&gt;&gt;&gt;<i> fonts that mapnik uses into the windows fonts directory, and Illustrator
</I>&gt;&gt;&gt;<i> loads them (I can use all of the fonts as a regular text element),
</I>&gt;&gt;&gt;<i> Illustrator still won't use them when I import the svg from nik2img.  Any
</I>&gt;&gt;&gt;<i> ideas on why it might not be picking those fonts up? (same issue in
</I>&gt;&gt;&gt;<i> Illustrator on a mac)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Also, when importing the svg to illustrator,  I get an error that says
</I>&gt;&gt;&gt;<i> &quot;The
</I>&gt;&gt;&gt;<i> following items could not be imported properly&quot; and &quot;clipping will be
</I>&gt;&gt;&gt;<i> lost
</I>&gt;&gt;&gt;<i> on roundtrip to Tiny&quot;.  It then imports the svg, and everything looks
</I>&gt;&gt;&gt;<i> fine
</I>&gt;&gt;&gt;<i> except for the text.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> A quick search on this error tells me that &quot;The graphic you are working
</I>&gt;&gt;&gt;<i> with
</I>&gt;&gt;&gt;<i> contains a clipping mask. The alert is simply telling you that the
</I>&gt;&gt;&gt;<i> clipping
</I>&gt;&gt;&gt;<i> mask will not survive the trip back to SVG Tiny&quot;  However, i think the
</I>&gt;&gt;&gt;<i> text
</I>&gt;&gt;&gt;<i> fill/font issue is unrelated because to this error because i get it even
</I>&gt;&gt;&gt;<i> when i create an svg of the map without any text labels.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Fri, Aug 14, 2009 at 1:29 PM, Dane Springmeyer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">blake at hailmail.net</A>&gt;
</I>&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Wow, never seen that before.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Jamie, do you get this when rendering to PDF as well or when you view
</I>&gt;&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;&gt;<i> SVG output in some other application like Firefox or Inkscape?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Can you post your relevant XML as well?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Dane
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Aug 14, 2009, at 10:20 AM, Jamie Robertson wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>  Hi all-  I'm having an issue with .svg export in Nik2img.  The ouput
</I>&gt;&gt;&gt;&gt;&gt;<i> svg
</I>&gt;&gt;&gt;&gt;&gt;<i> is really nice, except for text labels.  The halos for the text (white
</I>&gt;&gt;&gt;&gt;&gt;<i> on
</I>&gt;&gt;&gt;&gt;&gt;<i> the attached jpg) are placed, sized, and rendered correctly.  But the
</I>&gt;&gt;&gt;&gt;&gt;<i> text
</I>&gt;&gt;&gt;&gt;&gt;<i> fills (black) are enormous (take up a the entire exported area and then
</I>&gt;&gt;&gt;&gt;&gt;<i> some) and stacked upon each other. Notice the letter &quot;V&quot; which is
</I>&gt;&gt;&gt;&gt;&gt;<i> selected
</I>&gt;&gt;&gt;&gt;&gt;<i> in Illustrator on the attached jpg.  When i output this same xml file
</I>&gt;&gt;&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;&gt;&gt;<i> .png, everything renders correctly, including the text fills.  Any
</I>&gt;&gt;&gt;&gt;&gt;<i> ideas?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;&gt;&gt;<i> Jamie Robertson
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> &lt;nik2img_text_fill_issue.jpg&gt;_______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> Mapnik-users mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Mapnik-users mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">Mapnik-users at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mapnik-users">https://lists.berlios.de/mailman/listinfo/mapnik-users</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/mapnik-users/attachments/20090827/7de8f34e/attachment.html">https://lists.berlios.de/pipermail/mapnik-users/attachments/20090827/7de8f34e/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002239.html">[Mapnik-users] NIk2img text fill issue
</A></li>
	<LI>Next message: <A HREF="002242.html">[Mapnik-users] NIk2img text fill issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2241">[ date ]</a>
              <a href="thread.html#2241">[ thread ]</a>
              <a href="subject.html#2241">[ subject ]</a>
              <a href="author.html#2241">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mapnik-users">More information about the Mapnik-users
mailing list</a><br>
</body></html>
